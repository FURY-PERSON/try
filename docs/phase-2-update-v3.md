# ะคะฐะทะฐ 2: ะะธะทะฝะตั-ะฐะฝะฐะปะธัะธะบ โ ะะฑะฝะพะฒะปะตะฝะธะต ััะตะฑะพะฒะฐะฝะธะน v3

> **ะะฐัะฐ:** 2026-02-23
> **ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ะขะตะบััะฐั ัะตะฐะปะธะทะฐัะธั (server, mobile, web) + ะฝะพะฒัะต ััะตะฑะพะฒะฐะฝะธั ะพั ะฒะปะฐะดะตะปััะฐ
> **ะกัะฐััั:** ะะฑะฝะพะฒะปะตะฝะธะต ัััะตััะฒัััะธั ััะตะฑะพะฒะฐะฝะธะน ะธะท `phase-2-update-v2.md`

---

## ะะฑะทะพั ะธะทะผะตะฝะตะฝะธะน

### ะงะตัััะต ะบะปััะตะฒัะต ะทะฐะดะฐัะธ:
1. **ะะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั ัะฐะบัะพะฒ + ัะบัะฐะฝ ะฟะพะดะฑะพัะบะธ ะฟะพ ะบะฐัะตะณะพัะธะธ** โ ะฟะตัะตัะพะด ะพั one-to-many ะบ many-to-many ัะฒัะทะธ QuestionโCategory, ัะบัะฐะฝ ะฟะพะดะฑะพัะบะธ ะฟัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฐัะตะณะพัะธั
2. **ะะฝัะตะปะปะตะบััะฐะปัะฝัะน ะฐะฝัะธะฟะพะฒัะพั** โ ะฒัะตะผะตะฝะฝะฐั ัะพัะฐัะธั ัะฐะบัะพะฒ: 1 ะฝะตะดะตะปั (ะฝะตะฟัะฐะฒะธะปัะฝัะน) / 2 ะฝะตะดะตะปะธ (ะฟัะฐะฒะธะปัะฝัะน) ะดะปั ะะกะะฅ ัะตะถะธะผะพะฒ
3. **ะะพะดะฑะพัะบะธ ะฟะพ ัะปะพะถะฝะพััะธ** โ ะฟะพ ะฝะฐะถะฐัะธั ะฝะฐ ะบะฐััะพัะบั ัะปะพะถะฝะพััะธ ะพัะบััะฒะฐัััั ะฒะพะฟัะพัั ัะพะพัะฒะตัััะฒัััะตะณะพ ััะพะฒะฝั
4. **Activity-ะณัะฐัะธะบ ะฒ ััะธะปะต GitHub** โ ะผะตัััั ะฟะพ ะพัะธ X, ะฟะพะปะฝัะน ะณะพะดะพะฒะพะน ะพะฑะทะพั

---

## 1. ะะะะะะะะขะะะะะะะะะกะขะฌ ะคะะะขะะ ะ ะญะะะะ ะะะขะะะะะะ

### 1.1 ะัะพะฑะปะตะผะฐ

**ะขะตะบััะตะต ัะพััะพัะฝะธะต:**
- ะะฐะถะดัะน ะฒะพะฟัะพั (ัะฐะบั) ะฟัะธะฝะฐะดะปะตะถะธั **ัะพะฒะฝะพ ะพะดะฝะพะน** ะบะฐัะตะณะพัะธะธ (`Question.categoryId โ Category.id`, one-to-many)
- ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฐัะตะณะพัะธั ะฝะฐ Home Screen โ ััะฐะทั ะทะฐะฟััะบะฐะตััั ะธะณัะฐ (10 ัะปััะฐะนะฝัั ะฒะพะฟัะพัะพะฒ), ะฑะตะท ะฟัะพะผะตะถััะพัะฝะพะณะพ ัะบัะฐะฝะฐ
- ะคะฐะบั ะพ ยซะะฐััะตยป ะผะพะถะตั ะฑััั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะฟัะพ ยซะะพัะผะพัยป ะธ ยซะะฐัะบัยป, ะฝะพ ะฟัะธะฒัะทะฐะฝ ัะพะปัะบะพ ะบ ะพะดะฝะพะน ะบะฐัะตะณะพัะธะธ

**ะะพะฒะพะต ัะพััะพัะฝะธะต:**
- ะะฐะถะดัะน ะฒะพะฟัะพั ะผะพะถะตั ะฟัะธะฝะฐะดะปะตะถะฐัั **ะฝะตัะบะพะปัะบะธะผ ะบะฐัะตะณะพัะธัะผ** (many-to-many ัะตัะตะท ะฟัะพะผะตะถััะพัะฝัั ัะฐะฑะปะธัั `QuestionCategory`)
- ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฐัะตะณะพัะธั ะพัะบััะฒะฐะตััั **ัะบัะฐะฝ ะฟะพะดะฑะพัะบะธ ะฟะพ ะบะฐัะตะณะพัะธะธ** ั ะพะฟะธัะฐะฝะธะตะผ, ะบะพะปะธัะตััะฒะพะผ ัะฐะบัะพะฒ ะธ ะบะฝะพะฟะบะพะน ยซะะฐัะฐััยป
- ะกัะฐัะฐั ัะฒัะทั `Question.categoryId` ัะพััะฐะฝัะตััั ะบะฐะบ ะพัะฝะพะฒะฝะฐั ะบะฐัะตะณะพัะธั (ะพะฑัะฐัะฝะฐั ัะพะฒะผะตััะธะผะพััั), ะฝะพะฒะฐั ัะฐะฑะปะธัะฐ ะดะพะฑะฐะฒะปัะตั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต

### 1.2 ะะพะดะตะปั ะดะฐะฝะฝัั โ ะะทะผะตะฝะตะฝะธั

```prisma
// ะะะะะฏ ะฟัะพะผะตะถััะพัะฝะฐั ัะฐะฑะปะธัะฐ: Question โ Category (many-to-many)
model QuestionCategory {
  id         String   @id @default(cuid())
  questionId String
  categoryId String

  question   Question  @relation(fields: [questionId], references: [id], onDelete: Cascade)
  category   Category  @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@unique([questionId, categoryId])
  @@index([categoryId])
}

// ะะะะะะะะะะ Question โ ะดะพะฑะฐะฒะธัั ัะฒัะทั
model Question {
  // ... ัััะตััะฒัััะธะต ะฟะพะปั ...
  categoryId  String           // ะัะฝะพะฒะฝะฐั ะบะฐัะตะณะพัะธั (ะพััะฐัััั)
  category    Category         @relation(fields: [categoryId], references: [id])
  categories  QuestionCategory[]  // NEW: ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะบะฐัะตะณะพัะธะธ
}

// ะะะะะะะะะะ Category โ ะดะพะฑะฐะฒะธัั ะพะฑัะฐัะฝัั ัะฒัะทั
model Category {
  // ... ัััะตััะฒัััะธะต ะฟะพะปั ...
  questions       Question[]           // ะััะผะฐั ัะฒัะทั (ะพัะฝะพะฒะฝะฐั ะบะฐัะตะณะพัะธั)
  questionLinks   QuestionCategory[]   // NEW: ะฒัะต ะฒะพะฟัะพัั ัะตัะตะท m2m
}
```

**ะะธะณัะฐัะธั ะดะฐะฝะฝัั:**
- ะัะธ ะผะธะณัะฐัะธะธ: ะดะปั ะบะฐะถะดะพะณะพ ัััะตััะฒัััะตะณะพ `Question` ัะพะทะดะฐัั ะทะฐะฟะธัั ะฒ `QuestionCategory` ั ะตะณะพ ัะตะบััะธะผ `categoryId`
- ะญัะพ ะพะฑะตัะฟะตัะธั, ััะพ ะฒัะต ัััะตััะฒัััะธะต ะฒะพะฟัะพัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะฟะฐะดัั ะฒ m2m-ัะฐะฑะปะธัั

### 1.3 ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

---

**FR-400: ะะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั ะฒะพะฟัะพัะพะฒ**
- ะัะธะพัะธัะตั: Must
- ะะตะปะธะท: v1.2
- User Story: ะะฐะบ ะฒะปะฐะดะตะปะตั, ั ัะพัั ะฟัะธะฒัะทัะฒะฐัั ะพะดะธะฝ ัะฐะบั ะบ ะฝะตัะบะพะปัะบะธะผ ะบะฐัะตะณะพัะธัะผ, ััะพะฑั ัะฐะบั ะพ ยซะะฐััะตยป ะฟะพัะฒะปัะปัั ะธ ะฒ ยซะะพัะผะพัยป, ะธ ะฒ ยซะะฐัะบะฐยป.
- ะะฟะธัะฐะฝะธะต: ะะพะฟัะพั ะผะพะถะตั ะฑััั ัะฒัะทะฐะฝ ั ะฝะตัะบะพะปัะบะธะผะธ ะบะฐัะตะณะพัะธัะผะธ ัะตัะตะท ัะฐะฑะปะธัั `QuestionCategory`. ะัะฝะพะฒะฝะฐั ะบะฐัะตะณะพัะธั (`categoryId`) ะพััะฐัััั ะดะปั ะพะฑัะฐัะฝะพะน ัะพะฒะผะตััะธะผะพััะธ. ะ ะฐะดะผะธะฝะบะต ะฟัะธ ัะพะทะดะฐะฝะธะธ/ัะตะดะฐะบัะธัะพะฒะฐะฝะธะธ ะฒะพะฟัะพัะฐ โ ะผัะปััะธ-ัะตะปะตะบั ะบะฐัะตะณะพัะธะน. ะ ะผะพะฑะธะปัะฝะพะผ ะฟัะธะปะพะถะตะฝะธะธ ะฟัะธ ะณะตะฝะตัะฐัะธะธ ะฝะฐะฑะพัะฐ ะฟะพ ะบะฐัะตะณะพัะธะธ โ ะฟะพะธัะบ ัะตัะตะท `QuestionCategory`, ะฐ ะฝะต ัะพะปัะบะพ ัะตัะตะท `categoryId`.
- ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:
  - AC-1: ะะพะณะดะฐ ะฒะปะฐะดะตะปะตั ัะพะทะดะฐัั ะฒะพะฟัะพั ะฒ ะฐะดะผะธะฝะบะต, ัะพะณะดะฐ ะผะพะถะตั ะฒัะฑัะฐัั ะฝะตัะบะพะปัะบะพ ะบะฐัะตะณะพัะธะน (ัะตะบะฑะพะบัั ะธะปะธ ะผัะปััะธ-ัะตะปะตะบั)
  - AC-2: ะะพะณะดะฐ ะฒะพะฟัะพั ะฟัะธะฒัะทะฐะฝ ะบ 3 ะบะฐัะตะณะพัะธัะผ, ัะพะณะดะฐ ะพะฝ ะฟะพัะฒะปัะตััั ะฒ ะฟะพะดะฑะพัะบะฐั ะฒัะตั ัััั ะบะฐัะตะณะพัะธะน
  - AC-3: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะณัะฐะตั ะฒ ะฟะพะดะฑะพัะบั ยซะะฐัะบะฐยป, ัะพะณะดะฐ ะตะผั ะฟะพะฟะฐะดะฐัััั ะฒะพะฟัะพัั, ั ะบะพัะพััั ยซะะฐัะบะฐยป โ ะปัะฑะฐั ะธะท ะบะฐัะตะณะพัะธะน (ะฝะต ัะพะปัะบะพ ะพัะฝะพะฒะฝะฐั)
  - AC-4: ะะพะณะดะฐ ัััะตััะฒัััะธะต ะฒะพะฟัะพัั ะผะธะณัะธัััััั, ัะพะณะดะฐ ะธั ัะตะบััะฐั ะบะฐัะตะณะพัะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะดัะฑะปะธััะตััั ะฒ `QuestionCategory`
  - AC-5: ะะพะณะดะฐ ะฒ API `/home/feed` ะฒะพะทะฒัะฐัะฐัััั ะบะฐัะตะณะพัะธะธ, ัะพะณะดะฐ `availableCount` ััะธัะฐะตั ะฒะพะฟัะพัั ัะตัะตะท `QuestionCategory` (ะฒะบะปััะฐั ะฒะพะฟัะพัั ั ะดะพะฟะพะปะฝะธัะตะปัะฝัะผะธ ะบะฐัะตะณะพัะธัะผะธ)
- ะกะฒัะทะฐะฝะฝัะต ัะบัะฐะฝั: Admin โ Questions (ะพะฑะฝะพะฒะปัะฝะฝัะน), Home Screen
- ะขัะตะฑัะตั backend: ะะฐ
- API ะธะทะผะตะฝะตะฝะธั:
  - `POST /api/admin/questions` โ ะฟัะธะฝะธะผะฐะตั `categoryIds: string[]` ะฒะผะตััะพ ะพะดะฝะพะณะพ `categoryId`
  - `PATCH /api/admin/questions/:id` โ ะฐะฝะฐะปะพะณะธัะฝะพ
  - `GET /api/v1/home/feed` โ `categories[].availableCount` ััะธัะฐะตั ัะตัะตะท m2m-ัะฐะฑะปะธัั
  - `POST /api/v1/collections/start { type: 'category' }` โ ะธัะตั ะฒะพะฟัะพัั ัะตัะตะท `QuestionCategory`

---

**FR-401: ะญะบัะฐะฝ ะฟะพะดะฑะพัะบะธ ะฟะพ ะบะฐัะตะณะพัะธะธ**
- ะัะธะพัะธัะตั: Must
- ะะตะปะธะท: v1.2
- User Story: ะะฐะบ ะฟะพะปัะทะพะฒะฐัะตะปั, ั ัะพัั ะฟัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฐัะตะณะพัะธั ะฒะธะดะตัั ัะบัะฐะฝ ั ะพะฟะธัะฐะฝะธะตะผ ะธ ะธะฝัะพัะผะฐัะธะตะน ะพ ะฟะพะดะฑะพัะบะต, ััะพะฑั ะฟะพะฝะธะผะฐัั, ะฒะพ ััะพ ั ะฑัะดั ะธะณัะฐัั, ะฟัะตะถะดะต ัะตะผ ะฝะฐัะฐัั.
- ะะฟะธัะฐะฝะธะต: ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฐััะพัะบั ะบะฐัะตะณะพัะธะธ ะฝะฐ Home Screen ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตัะพะดะธั ะฝะฐ ัะบัะฐะฝ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ (ะฟะพ ะฐะฝะฐะปะพะณะธะธ ั ัะบัะฐะฝะพะผ ะดะตัะฐะปะธ ะฟะพะดะฑะพัะบะธ `collection/[id].tsx`). ะญะบัะฐะฝ ัะพะดะตัะถะธั: ะธะบะพะฝะบั ะบะฐัะตะณะพัะธะธ, ะฝะฐะทะฒะฐะฝะธะต, ะพะฟะธัะฐะฝะธะต, ะบะพะปะธัะตััะฒะพ ะดะพัััะฟะฝัั ะฒะพะฟัะพัะพะฒ, ะบะฝะพะฟะบั ยซะะฐัะฐััยป (10 ะฒะพะฟัะพัะพะฒ). ะัะปะธ ะบะฐัะตะณะพัะธั ะฟะพะปะฝะพัััั ะฟัะพะนะดะตะฝะฐ (ะฝะตั ะดะพัััะฟะฝัั ะฒะพะฟัะพัะพะฒ ั ััััะพะผ ะฐะฝัะธะฟะพะฒัะพัะฐ) โ ะฟะพะบะฐะทัะฒะฐะตััั ะฑะตะนะดะถ ยซะัะต ัะฐะบัั ะธะทััะตะฝั!ยป ะธ ะบะฝะพะฟะบะฐ ยซะะณัะฐัั ัะฝะพะฒะฐยป (ัะฑัะพั ะฐะฝัะธะฟะพะฒัะพัะฐ ะดะปั ััะพะน ะบะฐัะตะณะพัะธะธ โ ะฟะพะฒัะพัะฝะฐั ะธะณัะฐ ั ัะตะผ ะถะต ะฝะฐะฑะพัะพะผ).
- ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:
  - AC-1: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ะฝะฐ ะบะฐัะตะณะพัะธั ยซะะฐัะบะฐยป ะฝะฐ Home Screen, ัะพะณะดะฐ ะพัะบััะฒะฐะตััั ัะบัะฐะฝ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ (ะฐ ะฝะต ััะฐะทั ะธะณัะฐ)
  - AC-2: ะะพะณะดะฐ ัะบัะฐะฝ ะพัะบััะฒะฐะตััั, ัะพะณะดะฐ ะฒะธะดะฝั: ะธะบะพะฝะบะฐ, ะฝะฐะทะฒะฐะฝะธะต, ะพะฟะธัะฐะฝะธะต, ะบะพะปะธัะตััะฒะพ ะดะพัััะฟะฝัั ัะฐะบัะพะฒ, ะบะฝะพะฟะบะฐ ยซะะฐัะฐััยป
  - AC-3: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ยซะะฐัะฐััยป, ัะพะณะดะฐ ะทะฐะณััะถะฐัััั 10 ะฒะพะฟัะพัะพะฒ ะธ ะพัะบััะฒะฐะตััั Game Screen
  - AC-4: ะะพะณะดะฐ ะฒัะต ัะฐะบัั ะบะฐัะตะณะพัะธะธ ะฟัะพะนะดะตะฝั, ัะพะณะดะฐ ะฟะพะบะฐะทัะฒะฐะตััั ะฑะตะนะดะถ ยซะัะต ัะฐะบัั ะธะทััะตะฝั!ยป
  - AC-5: ะะพะณะดะฐ ะบะฐัะตะณะพัะธั ัะถะต ะฑัะปะฐ ะฟัะพะนะดะตะฝะฐ ัะฐะฝะตะต, ัะพะณะดะฐ ะฟะพะบะฐะทัะฒะฐะตััั ะฟะพัะปะตะดะฝะธะน ัะตะทัะปััะฐั (ะฟัะฐะฒะธะปัะฝัั/ะฒัะตะณะพ)
- ะกะฒัะทะฐะฝะฝัะต ัะบัะฐะฝั: Home Screen โ Category Detail Screen โ Game Screen
- ะขัะตะฑัะตั backend: ะะฐ
- API:
  - `GET /api/v1/categories/:id` โ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ ั `availableCount` ะดะปั ัะตะบััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะธ `lastResult`
- ะะพะฒัะต ัะฐะนะปั:
  - `mobile/app/category/[id].tsx` โ ัะบัะฐะฝ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ

---

## 2. ะะะขะะะะะะขะฃะะะฌะะซะ ะะะขะะะะะขะะ (SPACED REPETITION LITE)

### 2.1 ะัะพะฑะปะตะผะฐ

**ะขะตะบััะตะต ัะพััะพัะฝะธะต:**
- ะะฝัะธะฟะพะฒัะพั ะฒ `getQuestionsWithAntiRepeat()`:
  - ะัะฐะฒะธะปัะฝะพ ะพัะฒะตัะตะฝะฝัะต ะฒะพะฟัะพัั โ **ะธัะบะปััะฐัััั ะฝะฐะฒัะตะณะดะฐ**
  - ะะตะฟัะฐะฒะธะปัะฝะพ ะพัะฒะตัะตะฝะฝัะต โ ะธัะบะปััะฐัััั **7 ะดะฝะตะน**
- ะัะพะฑะปะตะผะฐ: ะฟัะฐะฒะธะปัะฝะพ ะพัะฒะตัะตะฝะฝัะต ัะฐะบัั ะฝะธะบะพะณะดะฐ ะฝะต ะฟะพะฒัะพัััััั. ะกะพ ะฒัะตะผะตะฝะตะผ ะฟัะป ะฒะพะฟัะพัะพะฒ ะธััะพัะฐะตััั, ะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะตัะตะณะพ ะธะณัะฐัั

**ะะพะฒะพะต ัะพััะพัะฝะธะต:**
- ะะตะฟัะฐะฒะธะปัะฝัะน ะพัะฒะตั โ ะฒะพะฟัะพั ะผะพะถะตั ะฟะพะฒัะพัะธัััั ัะตัะตะท **1 ะฝะตะดะตะปั** (7 ะดะฝะตะน)
- ะัะฐะฒะธะปัะฝัะน ะพัะฒะตั โ ะฒะพะฟัะพั ะผะพะถะตั ะฟะพะฒัะพัะธัััั ัะตัะตะท **2 ะฝะตะดะตะปะธ** (14 ะดะฝะตะน)
- ะัะฐะฒะธะปะพ ะฟัะธะผะตะฝัะตััั ะบะพ **ะะกะะ** ัะตะถะธะผะฐะผ ะธะณัั (Daily, ะบะฐัะตะณะพัะธะธ, ัะปะพะถะฝะพััั, ัะฟะตัะธะฐะปัะฝัะต ะฟะพะดะฑะพัะบะธ)
- ะัะฟะพะปัะทัะตััั ะดะฐัะฐ **ะฟะพัะปะตะดะฝะตะณะพ** ะพัะฒะตัะฐ ะฝะฐ ััะพั ะฒะพะฟัะพั (ะฝะต ะฟะตัะฒะพะณะพ)

### 2.2 ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

---

**FR-410: ะัะตะผะตะฝะฝะพะน ะฐะฝัะธะฟะพะฒัะพั ะดะปั ะฒัะตั ัะตะถะธะผะพะฒ**
- ะัะธะพัะธัะตั: Must
- ะะตะปะธะท: v1.2
- User Story: ะะฐะบ ะฟะพะปัะทะพะฒะฐัะตะปั, ั ัะพัั, ััะพะฑั ัะฐะบัั ะฟะพะฒัะพััะปะธัั ัะตัะตะท ัะฐะทัะผะฝะพะต ะฒัะตะผั, ััะพะฑั ะทะฐะบัะตะฟะปััั ะทะฝะฐะฝะธั, ะฐ ะฝะต ะฒัััะตัะฐัั ะพะดะฝะธ ะธ ัะต ะถะต ะฒะพะฟัะพัั ะบะฐะถะดัะน ะดะตะฝั ะธะปะธ ะฝะธะบะพะณะดะฐ ะฝะต ะฒะธะดะตัั ะธั ัะฝะพะฒะฐ.
- ะะฟะธัะฐะฝะธะต: ะะทะผะตะฝะธัั ะปะพะณะธะบั ะฐะฝัะธะฟะพะฒัะพัะฐ ะฒ ัะตัะฒะตัะฝะพะผ ะบะพะดะต:
  - ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป **ะฝะตะฟัะฐะฒะธะปัะฝะพ** โ ะฒะพะฟัะพั ะดะพัััะฟะตะฝ ัะฝะพะฒะฐ ัะตัะตะท **7 ะดะฝะตะน** ะฟะพัะปะต ะพัะฒะตัะฐ
  - ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป **ะฟัะฐะฒะธะปัะฝะพ** โ ะฒะพะฟัะพั ะดะพัััะฟะตะฝ ัะฝะพะฒะฐ ัะตัะตะท **14 ะดะฝะตะน** ะฟะพัะปะต ะพัะฒะตัะฐ
  - ะัะฟะพะปัะทัะตััั ะดะฐัะฐ **ะฟะพัะปะตะดะฝะตะณะพ ะพัะฒะตัะฐ** ะธะท `UserQuestionHistory` (ัะฐะผะฐั ะฟะพะทะดะฝัั ะทะฐะฟะธัั ะดะปั ะฟะฐัั userId + questionId)
  - ะัะฐะฒะธะปะพ ะตะดะธะฝะพะพะฑัะฐะทะฝะพ ะดะปั ะฒัะตั ัะตะถะธะผะพะฒ: Daily Set, ะบะฐัะตะณะพัะธะธ, ัะปะพะถะฝะพััั, ัะฟะตัะธะฐะปัะฝัะต ะฟะพะดะฑะพัะบะธ
  - ะัะปะธ ั ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะตั ะธััะพัะธะธ ะฟะพ ะฒะพะฟัะพัั โ ะฒะพะฟัะพั ะดะพัััะฟะตะฝ
- ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:
  - AC-1: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป ะฟัะฐะฒะธะปัะฝะพ ะฝะฐ ะฒะพะฟัะพั 1 ัะตะฒัะฐะปั, ัะพะณะดะฐ ััะพั ะฒะพะฟัะพั ะฝะต ะฟะพัะฒะปัะตััั ะดะพ 15 ัะตะฒัะฐะปั ะฒะบะปััะธัะตะปัะฝะพ
  - AC-2: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป ะฝะตะฟัะฐะฒะธะปัะฝะพ ะฝะฐ ะฒะพะฟัะพั 1 ัะตะฒัะฐะปั, ัะพะณะดะฐ ััะพั ะฒะพะฟัะพั ะฝะต ะฟะพัะฒะปัะตััั ะดะพ 8 ัะตะฒัะฐะปั ะฒะบะปััะธัะตะปัะฝะพ
  - AC-3: ะะพะณะดะฐ ะฟัะพัะปะพ 14 ะดะฝะตะน ะฟะพัะปะต ะฟัะฐะฒะธะปัะฝะพะณะพ ะพัะฒะตัะฐ, ัะพะณะดะฐ ะฒะพะฟัะพั ัะฝะพะฒะฐ ะดะพัััะฟะตะฝ ะฒะพ ะฒัะตั ัะตะถะธะผะฐั
  - AC-4: ะะพะณะดะฐ ะฟัะพัะปะพ 7 ะดะฝะตะน ะฟะพัะปะต ะฝะตะฟัะฐะฒะธะปัะฝะพะณะพ ะพัะฒะตัะฐ, ัะพะณะดะฐ ะฒะพะฟัะพั ัะฝะพะฒะฐ ะดะพัััะฟะตะฝ ะฒะพ ะฒัะตั ัะตะถะธะผะฐั
  - AC-5: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป ะฝะฐ ะฒะพะฟัะพั ะดะฒะฐะถะดั (ะฟัะฐะฒะธะปัะฝะพ 5 ะดะฝะตะน ะฝะฐะทะฐะด, ะฝะตะฟัะฐะฒะธะปัะฝะพ 3 ะดะฝั ะฝะฐะทะฐะด), ัะพะณะดะฐ ะธัะฟะพะปัะทัะตััั ะฟะพัะปะตะดะฝะธะน ะพัะฒะตั (ะฝะตะฟัะฐะฒะธะปัะฝัะน, 7 ะดะฝะตะน โ ะดะพัััะฟะตะฝ ัะตัะตะท 4 ะดะฝั)
  - AC-6: ะะพะณะดะฐ ะฟัะธะผะตะฝัะตััั ะฐะฝัะธะฟะพะฒัะพั ะฒ Daily Set, ัะพะณะดะฐ ะธัะฟะพะปัะทััััั ัะต ะถะต ะฟัะฐะฒะธะปะฐ (ะฝะต ะพัะดะตะปัะฝะฐั ะปะพะณะธะบะฐ)
  - AC-7: ะะพะณะดะฐ `availableCount` ะพัะพะฑัะฐะถะฐะตััั ะฝะฐ Home Screen, ัะพะณะดะฐ ะพะฝ ััะธััะฒะฐะตั ะฝะพะฒัะต ะฟัะฐะฒะธะปะฐ ะฐะฝัะธะฟะพะฒัะพัะฐ (ะฒะพะฟัะพัั ะฒะพะทะฒัะฐัะฐัััั ะฒ ะฟัะป)
- ะกะฒัะทะฐะฝะฝัะต ะบะพะผะฟะพะฝะตะฝัั: Server โ CollectionsService, DailySetsService, HomeService
- ะขัะตะฑัะตั backend: ะะฐ
- ะคะฐะนะปั ะดะปั ะธะทะผะตะฝะตะฝะธั:
  - `server/src/modules/collections/collections.service.ts` โ ะผะตัะพะด `getQuestionsWithAntiRepeat()`
  - `server/src/modules/daily-sets/daily-sets.service.ts` โ ะตัะปะธ ะตััั ัะพะฑััะฒะตะฝะฝะฐั ะปะพะณะธะบะฐ ะฒัะฑะพัะบะธ
  - `server/src/modules/home/home.service.ts` โ ัะฐัััั `availableCount`

---

### 2.3 ะะพะณะธะบะฐ ะทะฐะฟัะพัะฐ (ะฟัะตะฒะดะพะบะพะด)

```sql
-- ะะพะปััะธัั ะดะพัััะฟะฝัะต ะฒะพะฟัะพัั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ั ััััะพะผ ะฐะฝัะธะฟะพะฒัะพัะฐ
SELECT q.*
FROM questions q
WHERE q.status = 'approved'
  AND q.id NOT IN (
    -- ะัะบะปััะธัั ะฒะพะฟัะพัั, ะฝะฐ ะบะพัะพััะต ะพัะฒะตัะธะปะธ ะะะะะะะฌะะ ะผะตะฝะตะต 14 ะดะฝะตะน ะฝะฐะทะฐะด
    SELECT DISTINCT uqh.questionId
    FROM user_question_history uqh
    WHERE uqh.userId = :userId
      AND uqh.result = 'correct'
      AND uqh.answeredAt > NOW() - INTERVAL '14 days'
      AND uqh.answeredAt = (
        SELECT MAX(uqh2.answeredAt)
        FROM user_question_history uqh2
        WHERE uqh2.userId = uqh.userId AND uqh2.questionId = uqh.questionId
      )
  )
  AND q.id NOT IN (
    -- ะัะบะปััะธัั ะฒะพะฟัะพัั, ะฝะฐ ะบะพัะพััะต ะพัะฒะตัะธะปะธ ะะะะะะะะะฌะะ ะผะตะฝะตะต 7 ะดะฝะตะน ะฝะฐะทะฐะด
    SELECT DISTINCT uqh.questionId
    FROM user_question_history uqh
    WHERE uqh.userId = :userId
      AND uqh.result = 'incorrect'
      AND uqh.answeredAt > NOW() - INTERVAL '7 days'
      AND uqh.answeredAt = (
        SELECT MAX(uqh2.answeredAt)
        FROM user_question_history uqh2
        WHERE uqh2.userId = uqh.userId AND uqh2.questionId = uqh.questionId
      )
  )
```

**ะฃะฟัะพััะฝะฝะฐั ะฒะตััะธั ะดะปั Prisma:**
```typescript
// ะะปั ะบะฐะถะดะพะณะพ ะฒะพะฟัะพัะฐ ะฑะตััะผ ะฟะพัะปะตะดะฝะธะน ะพัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั
// ะัะปะธ ะฟะพัะปะตะดะฝะธะน ะพัะฒะตั correct ะธ < 14 ะดะฝะตะน ะฝะฐะทะฐะด โ ะธัะบะปััะธัั
// ะัะปะธ ะฟะพัะปะตะดะฝะธะน ะพัะฒะตั incorrect ะธ < 7 ะดะฝะตะน ะฝะฐะทะฐะด โ ะธัะบะปััะธัั
// ะะฝะฐัะต โ ะฒะพะฟัะพั ะดะพัััะฟะตะฝ
```

---

## 3. ะะะะะะะะ ะะ ะกะะะะะะกะขะ

### 3.1 ะขะตะบััะตะต ัะพััะพัะฝะธะต

ะคัะฝะบัะธะพะฝะฐะป ะฟะพะดะฑะพัะพะบ ะฟะพ ัะปะพะถะฝะพััะธ **ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝ** (FR-103):
- ะะฐ Home Screen ััะธ ะบะฐััะพัะบะธ: ะัะณะบะธะต (๐ข), ะกัะตะดะฝะธะต (๐ก), ะกะปะพะถะฝัะต (๐ด)
- ะัะธ ะฝะฐะถะฐัะธะธ ััะฐะทั ะทะฐะฟััะบะฐะตััั ะธะณัะฐ (10 ะฒะพะฟัะพัะพะฒ ัะพะพัะฒะตัััะฒัััะตะน ัะปะพะถะฝะพััะธ)
- ะะฐะฟะฟะธะฝะณ: easy โ difficulty 1-2, medium โ difficulty 3, hard โ difficulty 4-5

### 3.2 ะฃัะพัะฝะตะฝะธะต ััะตะฑะพะฒะฐะฝะธั

ะะพะฒะตะดะตะฝะธะต ะฟะพ ะฝะฐะถะฐัะธั ะฝะฐ ะบะฐััะพัะบั ัะปะพะถะฝะพััะธ ะพััะฐัััั ะฟัะตะถะฝะธะผ (ะฟััะผะพะน ััะฐัั ะธะณัั). ะขัะตะฑะพะฒะฐะฝะธะต ะฟะพะดัะฒะตัะถะดะตะฝะพ โ ะดะพะฟะพะปะฝะธัะตะปัะฝัั ะธะทะผะตะฝะตะฝะธะน ะฝะต ััะตะฑัะตััั, ะบัะพะผะต ะฟัะธะผะตะฝะตะฝะธั ะฝะพะฒะพะณะพ ะฐะฝัะธะฟะพะฒัะพัะฐ (FR-410).

---

**FR-420: ะะพะดะฑะพัะบะธ ะฟะพ ัะปะพะถะฝะพััะธ โ ะฟะพะดัะฒะตัะถะดะตะฝะธะต ัะตะบััะตะน ัะตะฐะปะธะทะฐัะธะธ**
- ะัะธะพัะธัะตั: Must (ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)
- ะะตะปะธะท: v1.1 (done)
- User Story: ะะฐะบ ะฟะพะปัะทะพะฒะฐัะตะปั, ั ัะพัั ะฝะฐะถะฐัั ะฝะฐ ะบะฐััะพัะบั ัะปะพะถะฝะพััะธ ะธ ััะฐะทั ะฟะพะปััะธัั ะฝะฐะฑะพั ะฒะพะฟัะพัะพะฒ ััะพะณะพ ััะพะฒะฝั.
- ะะฟะธัะฐะฝะธะต: ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะพะดะฝั ะธะท ัััั ะบะฐััะพัะตะบ ัะปะพะถะฝะพััะธ (ะัะณะบะธะต/ะกัะตะดะฝะธะต/ะกะปะพะถะฝัะต) ะณะตะฝะตัะธััะตััั ะฝะฐะฑะพั ะธะท 10 ะฒะพะฟัะพัะพะฒ ัะพะพัะฒะตัััะฒัััะตะณะพ ััะพะฒะฝั difficulty ั ััััะพะผ ะฐะฝัะธะฟะพะฒัะพัะฐ (FR-410). ะะฐะฟะฟะธะฝะณ ััะพะฒะฝะตะน:
  - ะัะณะบะธะต: difficulty 1-2
  - ะกัะตะดะฝะธะต: difficulty 3
  - ะกะปะพะถะฝัะต: difficulty 4-5
- ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:
  - AC-1: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ยซะกะปะพะถะฝัะตยป, ัะพะณะดะฐ ะทะฐะณััะถะฐัััั 10 ะฒะพะฟัะพัะพะฒ ั difficulty 4-5
  - AC-2: ะะพะณะดะฐ ะฝะฐะฑะพั ะทะฐะณััะถะตะฝ, ัะพะณะดะฐ ะพัะบััะฒะฐะตััั Game Screen
  - AC-3: ะะพะณะดะฐ ะฒะพะฟัะพัั ะฒัะฑะธัะฐัััั, ัะพะณะดะฐ ะฟัะธะผะตะฝัะตััั ะฐะฝัะธะฟะพะฒัะพั (FR-410): ะฟัะฐะฒะธะปัะฝัะต โ ะฝะต ัะฐะฝััะต 14 ะดะฝะตะน, ะฝะตะฟัะฐะฒะธะปัะฝัะต โ ะฝะต ัะฐะฝััะต 7 ะดะฝะตะน
  - AC-4: ะะพะณะดะฐ ะฝะตะดะพััะฐัะพัะฝะพ ะฒะพะฟัะพัะพะฒ ะดะฐะฝะฝะพะน ัะปะพะถะฝะพััะธ (ั ััััะพะผ ะฐะฝัะธะฟะพะฒัะพัะฐ), ัะพะณะดะฐ ะฒะพะทะฒัะฐัะฐะตััั ะดะพัััะฟะฝะพะต ะบะพะปะธัะตััะฒะพ (ะผะพะถะตั ะฑััั < 10)
- ะกัะฐััั: **ะะตะฐะปะธะทะพะฒะฐะฝะพ**, ััะตะฑัะตััั ัะพะปัะบะพ ะพะฑะฝะพะฒะปะตะฝะธะต ะฐะฝัะธะฟะพะฒัะพัะฐ (FR-410)

---

## 4. ACTIVITY-ะะะะคะะ ะ ะกะขะะะ GITHUB

### 4.1 ะัะพะฑะปะตะผะฐ

**ะขะตะบััะตะต ัะพััะพัะฝะธะต:**
- Heatmap ะฟะพะบะฐะทัะฒะฐะตั **12 ะฝะตะดะตะปั** (~3 ะผะตัััะฐ) ะฒ ะฒะธะดะต ัะตัะบะธ 12ร7
- ะะตั ะฟะพะดะฟะธัะตะน ะผะตัััะตะฒ ะฟะพ ะพัะธ X
- ะะพะผะฟะฐะบัะฝัะน, ะฝะพ ะฝะตะดะพััะฐัะพัะฝะพ ะธะฝัะพัะผะฐัะธะฒะฝัะน ะดะปั ะดะพะปะณะพััะพัะฝะพะน ะผะพัะธะฒะฐัะธะธ

**ะะพะฒะพะต ัะพััะพัะฝะธะต:**
- Heatmap ะฟะพะบะฐะทัะฒะฐะตั **ะฟะพะปะฝัะน ะณะพะด** (52 ะฝะตะดะตะปะธ) ะฒ ััะธะปะต GitHub Contribution Graph
- ะะพ ะพัะธ X โ ะฟะพะดะฟะธัะธ **ะผะตัััะตะฒ** (ะฏะฝะฒ, ะคะตะฒ, ะะฐั, ...)
- ะะพ ะพัะธ Y โ ะดะฝะธ ะฝะตะดะตะปะธ (ะะฝ, ะกั, ะั โ ะบะฐะบ ั GitHub, ะฝะต ะฒัะต 7)
- ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะบัะพะปะป ะดะปั ัะฐะทะผะตัะตะฝะธั 52 ะฝะตะดะตะปั
- ะัะฐะดะฐัะธั ัะฒะตัะฐ ะฟะพ ะธะฝัะตะฝัะธะฒะฝะพััะธ (ะฝะต ะฟัะพััะพ active/inactive):
  - ะะตั ะธะณั: ะฟัััะฐั ััะตะนะบะฐ
  - 1 ะธะณัะฐ: ัะฒะตัะปะพ-ะทะตะปัะฝัะน
  - 2-3 ะธะณัั: ััะตะดะฝะต-ะทะตะปัะฝัะน
  - 4+ ะธะณั: ะฝะฐัััะตะฝะฝัะน ะทะตะปัะฝัะน

### 4.2 ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

---

**FR-430: Activity-ะณัะฐัะธะบ ะฒ ััะธะปะต GitHub Contribution Graph**
- ะัะธะพัะธัะตั: Must
- ะะตะปะธะท: v1.2
- User Story: ะะฐะบ ะฟะพะปัะทะพะฒะฐัะตะปั, ั ัะพัั ะฒะธะดะตัั ัะฒะพั ะณะพะดะพะฒัั ะฐะบัะธะฒะฝะพััั ะฒ ะฒะธะดะต ะณัะฐัะธะบะฐ ะบะฐะบ ะฝะฐ GitHub, ััะพะฑั ะฒะธะดะตัั ะฟัะพะณัะตัั ะทะฐ ะดะปะธัะตะปัะฝัะน ะฟะตัะธะพะด ะธ ะผะพัะธะฒะธัะพะฒะฐัั ัะตะฑั ะฟะพะดะดะตัะถะธะฒะฐัั ัะตะณัะปััะฝะพััั.
- ะะฟะธัะฐะฝะธะต: ะะฐะผะตะฝะธัั ัะตะบััะธะน heatmap (12 ะฝะตะดะตะปั, boolean) ะฝะฐ ะฟะพะปะฝะพัะตะฝะฝัะน GitHub-style contribution graph:
  1. **ะะตัะธะพะด:** 52 ะฝะตะดะตะปะธ (1 ะณะพะด) ะพั ัะตะบััะตะน ะดะฐัั ะฝะฐะทะฐะด
  2. **ะัั X (ะณะพัะธะทะพะฝัะฐะปัะฝะฐั):** ะะตัััั โ ะฟะพะดะฟะธัะธ ยซะฏะฝะฒยป, ยซะคะตะฒยป, ... ะฟะพัะฒะปััััั ะฝะฐะด ะฟะตัะฒะพะน ะฝะตะดะตะปะตะน ะบะฐะถะดะพะณะพ ะผะตัััะฐ
  3. **ะัั Y (ะฒะตััะธะบะฐะปัะฝะฐั):** ะะฝะธ ะฝะตะดะตะปะธ โ ะฟะพะบะฐะทัะฒะฐัั ัะพะบัะฐััะฝะฝะพ ยซะะฝยป, ยซะกัยป, ยซะัยป (ะบะฐะบ ั GitHub โ ัะตัะตะท ะพะดะฝั ะดะปั ัะบะพะฝะพะผะธะธ ะผะตััะฐ)
  4. **ะฏัะตะนะบะธ:** ะะฒะฐะดัะฐัะฝัะต, ั 2px gap, ัะบััะณะปัะฝะฝัะต ัะณะปั (2-3px)
  5. **ะัะฐะดะฐัะธั ัะฒะตัะฐ:**
     - 0 ะธะณั: `#ebedf0` (light) / `#161b22` (dark) โ ะฟัััะฐั
     - 1 ะธะณัะฐ: `#9be9a8` (light) / `#0e4429` (dark) โ ััะพะฒะตะฝั 1
     - 2-3 ะธะณัั: `#40c463` (light) / `#006d32` (dark) โ ััะพะฒะตะฝั 2
     - 4-5 ะธะณั: `#30a14e` (light) / `#26a641` (dark) โ ััะพะฒะตะฝั 3
     - 6+ ะธะณั: `#216e39` (light) / `#39d353` (dark) โ ััะพะฒะตะฝั 4
  6. **ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะบัะพะปะป:** ะัะฐัะธะบ ัะธัะต ัะบัะฐะฝะฐ โ ScrollView ั ะณะพัะธะทะพะฝัะฐะปัะฝัะผ ัะบัะพะปะปะพะผ, ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะพัะบัะพะปะปะตะฝ ะบ ัะตะบััะตะน ะฝะตะดะตะปะต (ะฒะฟัะฐะฒะพ)
  7. **ะะตะณะตะฝะดะฐ:** ะะฝะธะทั ะณัะฐัะธะบะฐ โ ยซะะตะฝััะต โโโโโ ะะพะปััะตยป ั ะณัะฐะดะฐัะธะตะน ัะฒะตัะพะฒ
  8. **ะะพะดัััั ะธะณั ะทะฐ ะดะตะฝั:** ะะพะปะธัะตััะฒะพ ัะฝะธะบะฐะปัะฝัั ัะตััะธะน (Daily Set + ะบะฐัะตะณะพัะธั + ัะปะพะถะฝะพััั + ะฟะพะดะฑะพัะบะฐ) ะทะฐ ะบะฐะถะดัะน ะดะตะฝั
- ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:
  - AC-1: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฟัะพัะธะปั, ัะพะณะดะฐ ะฒะธะดะธั activity-ะณัะฐัะธะบ ะทะฐ ะฟะพัะปะตะดะฝะธะน ะณะพะด
  - AC-2: ะะพะณะดะฐ ะฝะฐ ะณัะฐัะธะบะต ะผะตััั ยซะคะตะฒยป, ัะพะณะดะฐ ะฟะพะดะฟะธัั ยซะคะตะฒยป ัะฐัะฟะพะปะพะถะตะฝะฐ ะฝะฐะด ะฟะตัะฒะพะน ะฝะตะดะตะปะตะน ัะตะฒัะฐะปั
  - AC-3: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะณัะฐะป 3 ัะฐะทะฐ ะทะฐ ะดะตะฝั, ัะพะณะดะฐ ััะตะนะบะฐ ะธะผะตะตั ัะฒะตั ััะพะฒะฝั 2 (ััะตะดะฝะต-ะทะตะปัะฝัะน)
  - AC-4: ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ัะบัะพะปะปะธั ะณัะฐัะธะบ, ัะพะณะดะฐ ะฒะธะดะฝั ะฒัะต 52 ะฝะตะดะตะปะธ ั ะฟะพะดะฟะธััะผะธ ะผะตัััะตะฒ
  - AC-5: ะะพะณะดะฐ ะณัะฐัะธะบ ะพัะบััะฒะฐะตััั, ัะพะณะดะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะพัะบัะพะปะปะตะฝ ะบ ัะตะบััะตะน ะดะฐัะต (ะฟัะฐะฒัะน ะบัะฐะน)
  - AC-6: ะะพะณะดะฐ ะฝะตั ะดะฐะฝะฝัั ะทะฐ ะบะฐะบะพะน-ัะพ ะดะตะฝั, ัะพะณะดะฐ ััะตะนะบะฐ ะฟัััะฐั (ัะตัะฐั)
  - AC-7: ะะพะณะดะฐ ะฒะบะปััะตะฝะฐ ััะผะฝะฐั ัะตะผะฐ, ัะพะณะดะฐ ะธัะฟะพะปัะทััััั ััะผะฝัะต ัะฒะตัะฐ ะณัะฐะดะฐัะธะธ (ะบะฐะบ ั GitHub dark mode)
- ะกะฒัะทะฐะฝะฝัะต ัะบัะฐะฝั: Profile / Stats Screen
- ะขัะตะฑัะตั backend: ะะฐ (ะธะทะผะตะฝะตะฝะธะต ัะพัะผะฐัะฐ ะพัะฒะตัะฐ)
- API ะธะทะผะตะฝะตะฝะธั:
  - `GET /api/v1/users/me/stats` โ ะฟะพะปะต `activityMap` ะผะตะฝัะตั ัะพัะผะฐั:
    - **ะัะปะพ:** `Record<string, boolean>` (`{ "2026-02-01": true }`)
    - **ะกัะฐะปะพ:** `Record<string, number>` (`{ "2026-02-01": 3 }`) โ ะบะพะปะธัะตััะฒะพ ัะตััะธะน ะทะฐ ะดะตะฝั
  - ะะตัะธะพะด: 365 ะดะฝะตะน (ะฒะผะตััะพ ัะตะบััะธั 365, ะฝะพ ั ะฟะพะดััััะพะผ ะบะพะปะธัะตััะฒะฐ, ะฐ ะฝะต ะฟัะพััะพ boolean)
- ะคะฐะนะปั ะดะปั ะธะทะผะตะฝะตะฝะธั:
  - `server/src/modules/users/users.service.ts` โ `getUserStats()`: ะฒะพะทะฒัะฐัะฐัั `Record<string, number>`
  - `mobile/src/features/profile/components/HeatmapCalendar.tsx` โ ะฟะพะปะฝัะน ัะตะดะธะทะฐะนะฝ ะบะพะผะฟะพะฝะตะฝัะฐ
  - `mobile/app/(tabs)/profile/index.tsx` โ ะพะฑะฝะพะฒะธัั ะฟัะพะฟัั ะบะพะผะฟะพะฝะตะฝัะฐ

---

### 4.3 ะะธะทัะฐะปัะฝะฐั ัะฟะตัะธัะธะบะฐัะธั

```
            ะฏะฝะฒ     ะคะตะฒ     ะะฐั     ะะฟั     ...     ะะตะบ     ะฏะฝะฒ     ะคะตะฒ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   ะะฝ   โ โโโโ โโโโ โโโโ โโโโ     ...     โโโโ โโโโ โโ        โ
        โ                                                               โ
   ะกั   โ โโโโ โโโโ โโโโ โโโโ     ...     โโโโ โโโโ โโ        โ
        โ                                                               โ
   ะั   โ โโโโ โโโโ โโโโ โโโโ     ...     โโโโ โโโโ โโ        โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ ะณะพัะธะทะพะฝัะฐะปัะฝัะน ัะบัะพะปะป โ

   ะะตะณะตะฝะดะฐ:  ะะตะฝััะต  โ โ โ โ โ  ะะพะปััะต
```

**ะะฐะทะผะตัั:**
- ะฏัะตะนะบะฐ: 12ร12px
- Gap: 2px
- ะจะธัะธะฝะฐ ะณัะฐัะธะบะฐ: ~52 ร (12 + 2) = ~728px (ััะตะฑัะตั ัะบัะพะปะปะฐ)
- ะััะพัะฐ: 7 ร (12 + 2) = ~98px + ะฟะพะดะฟะธัะธ

---

## 5. ะะะะะะ ะะะะะซะฅ โ ะกะะะะะ ะะะะะะะะะ

### 5.1 ะะพะฒะฐั ัะฐะฑะปะธัะฐ: QuestionCategory

```prisma
model QuestionCategory {
  id         String   @id @default(cuid())
  questionId String
  categoryId String

  question   Question  @relation(fields: [questionId], references: [id], onDelete: Cascade)
  category   Category  @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@unique([questionId, categoryId])
  @@index([categoryId])
}
```

### 5.2 ะะฑะฝะพะฒะปะตะฝะธะต: Question

```prisma
model Question {
  // ... ัััะตััะฒัััะธะต ะฟะพะปั ...
  categories  QuestionCategory[]  // NEW: m2m ัะฒัะทั ั ะบะฐัะตะณะพัะธัะผะธ
}
```

### 5.3 ะะฑะฝะพะฒะปะตะฝะธะต: Category

```prisma
model Category {
  // ... ัััะตััะฒัััะธะต ะฟะพะปั ...
  questionLinks  QuestionCategory[]  // NEW: m2m ะพะฑัะฐัะฝะฐั ัะฒัะทั
}
```

### 5.4 ะะฑะฝะพะฒะปะตะฝะธะต: activityMap ัะพัะผะฐั

```typescript
// ะัะปะพ:
activityMap: Record<string, boolean>  // { "2026-02-01": true }

// ะกัะฐะปะพ:
activityMap: Record<string, number>   // { "2026-02-01": 3 }
```

---

## 6. API ENDPOINTS โ ะะะะะะะะะฏ

```
# ะะพะฒัะต endpoints

GET    /api/v1/categories/:id         โ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ (ั availableCount, lastResult)
  Headers: x-device-id
  Response: {
    id, name, nameEn, slug, icon, color, description, descriptionEn,
    availableCount: number,
    totalQuestions: number,
    lastResult: { correctAnswers: number, totalQuestions: number, completedAt: Date } | null
  }

# ะะทะผะตะฝะตะฝะธั ัััะตััะฒัััะธั endpoints

POST   /api/v1/collections/start      โ ะพะฑะฝะพะฒะธัั ะฐะฝัะธะฟะพะฒัะพั (FR-410)
GET    /api/v1/home/feed              โ availableCount ัะตัะตะท m2m-ัะฐะฑะปะธัั
GET    /api/v1/users/me/stats         โ activityMap: Record<string, number>

# Admin endpoints โ ะธะทะผะตะฝะตะฝะธั

POST   /api/admin/questions           โ categoryIds: string[] (ะฒะผะตััะพ categoryId)
PATCH  /api/admin/questions/:id       โ categoryIds: string[] (ะพะฟัะธะพะฝะฐะปัะฝะพ)
GET    /api/admin/questions            โ ัะธะปััั ะฟะพ ะบะฐัะตะณะพัะธะธ ัะตัะตะท m2m
```

---

## 7. ะะะะะะะะะะซะ USER FLOWS

### 7.1 ะะฐะถะฐัะธะต ะฝะฐ ะบะฐัะตะณะพัะธั (ะฝะพะฒัะน flow)

```
[Home Screen]
  โ ะขะฐะฟ ะฝะฐ ยซ๐ฌ ะะฐัะบะฐ (47)ยป
  โ [Category Detail Screen]
    โโโ ะะบะพะฝะบะฐ: ๐ฌ
    โโโ ะะฐะทะฒะฐะฝะธะต: ยซะะฐัะบะฐยป
    โโโ ะะฟะธัะฐะฝะธะต: ยซะฃะดะธะฒะธัะตะปัะฝัะต ัะฐะบัั ะธะท ะผะธัะฐ ะฝะฐัะบะธ...ยป
    โโโ ะะพัััะฟะฝะพ ัะฐะบัะพะฒ: 47
    โโโ ะะพัะปะตะดะฝะธะน ัะตะทัะปััะฐั: 8/10 (ะตัะปะธ ะธะณัะฐะป ัะฐะฝะตะต)
    โโโ ะะฝะพะฟะบะฐ ยซะะฐัะฐััยป (10 ะฒะพะฟัะพัะพะฒ)
        โ POST /api/v1/collections/start { type: 'category', categoryId, count: 10 }
        โ [Game Screen: 10 ะฒะพะฟัะพัะพะฒ]
        โ [Results Screen]
        โ ะะฐะทะฐะด ะฝะฐ Category Detail (ะพะฑะฝะพะฒะปัะฝะฝัะน ัะตะทัะปััะฐั)
```

### 7.2 Activity-ะณัะฐัะธะบ

```
[Profile Screen]
  โโโ [Stats Cards: streak, score, facts]
  โโโ [Activity Graph โ GitHub style]
  โ   โโโ ะะพะดะฟะธัะธ ะผะตัััะตะฒ: ะะฐั ะะฟั ะะฐะน ... ะฏะฝะฒ ะคะตะฒ
  โ   โโโ ะกะตัะบะฐ 52ร7 ััะตะตะบ ั ะณัะฐะดะฐัะธะตะน ะทะตะปัะฝะพะณะพ
  โ   โโโ ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะบัะพะปะป (ัะตะบััะฐั ะดะฐัะฐ ัะฟัะฐะฒะฐ)
  โ   โโโ ะะตะณะตะฝะดะฐ: ะะตะฝััะต โโโโโ ะะพะปััะต
  โโโ [Statistics: total games, correct %, ...]
```

---

## 8. ะะะะะะขะะงะะกะะะ ะกะะะซะขะะฏ โ ะะะะะะะะะะฏ

| ะกะพะฑััะธะต | ะะฐัะฐะผะตััั | ะะพะณะดะฐ ััะตะบะฐะตััั |
|---------|-----------|-----------------|
| `category_detail_viewed` | `categoryId`, `categorySlug`, `availableCount` | ะัะบัััะธะต ัะบัะฐะฝะฐ ะดะตัะฐะปะธ ะบะฐัะตะณะพัะธะธ |
| `category_start` | `categoryId`, `questionCount` | ะะฐะถะฐัะธะต ยซะะฐัะฐััยป ะฝะฐ ัะบัะฐะฝะต ะบะฐัะตะณะพัะธะธ |

---

## 9. ะะะะะะะขะะะะฆะะฏ ะะะะะะะะฆะะ

### ะะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั (ัะตะบะพะผะตะฝะดัะตะผัะน):

**ะญัะฐะฟ 5 โ ะะฝัะธะฟะพะฒัะพั ะธ Activity (2-3 ะดะฝั):**
1. FR-410: ะะฝัะตะปะปะตะบััะฐะปัะฝัะน ะฐะฝัะธะฟะพะฒัะพั (backend โ ะธะทะผะตะฝะตะฝะธะต ะพะดะฝะพะณะพ ะผะตัะพะดะฐ)
2. FR-430: Activity-ะณัะฐัะธะบ GitHub-style (backend โ ัะพัะผะฐั ะพัะฒะตัะฐ + mobile โ ะบะพะผะฟะพะฝะตะฝั)

**ะญัะฐะฟ 6 โ ะะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั (3-5 ะดะฝะตะน):**
3. FR-400: ะะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั (schema migration + backend + admin UI)
4. FR-401: ะญะบัะฐะฝ ะฟะพะดะฑะพัะบะธ ะฟะพ ะบะฐัะตะณะพัะธะธ (mobile)

**ะะฐะฒะธัะธะผะพััะธ:**
- FR-410 (ะฐะฝัะธะฟะพะฒัะพั) ะฝะต ะทะฐะฒะธัะธั ะพั FR-400 (ะผะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั), ะผะพะถะฝะพ ะดะตะปะฐัั ะฟะฐัะฐะปะปะตะปัะฝะพ
- FR-401 (ัะบัะฐะฝ ะบะฐัะตะณะพัะธะธ) ะทะฐะฒะธัะธั ะพั FR-400 (ะฝัะถะฝะฐ m2m-ัะฒัะทั ะดะปั ะบะพััะตะบัะฝะพะณะพ availableCount)
- FR-430 (activity) ะฟะพะปะฝะพัััั ะฝะตะทะฐะฒะธัะธะผ, ะผะพะถะฝะพ ะดะตะปะฐัั ะฒ ะปัะฑะพะน ะผะพะผะตะฝั
- FR-420 (ัะปะพะถะฝะพััั) โ ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ, ะฝัะถะตะฝ ัะพะปัะบะพ ะฐะฝัะธะฟะพะฒัะพั ะธะท FR-410

---

## 10. ะะะะฏะะะ ะะ ะะะขะะะะ

| ะะทะผะตะฝะตะฝะธะต | ะะถะธะดะฐะตะผะพะต ะฒะปะธัะฝะธะต |
|-----------|-------------------|
| ะะฝะพะณะพะบะฐัะตะณะพัะธะนะฝะพััั | +15% ะบะพะฝัะตะฝัะฐ ะฒ ะบะฐะถะดะพะน ะบะฐัะตะณะพัะธะธ โ ะดะพะปััะต ะธะณัะฐัั ะดะพ ยซะัะต ัะฐะบัั ะธะทััะตะฝัยป |
| ะะฝัะธะฟะพะฒัะพั 7/14 ะดะฝะตะน | Retention D7 +3-5% (ัะฐะบัั ะฒะพะทะฒัะฐัะฐัััั, ะตััั ะฟัะธัะธะฝะฐ ะฒะตัะฝััััั) |
| ะญะบัะฐะฝ ะบะฐัะตะณะพัะธะธ | Session duration +10% (ะดะพะฟะพะปะฝะธัะตะปัะฝัะน ัะบัะฐะฝ โ ะฑะพะปััะต ะฒัะตะผั ะฒ ะฟัะธะปะพะถะตะฝะธะธ) |
| GitHub activity | Retention D30 +5% (ะฒะธะทัะฐะปัะฝะฐั ะผะพัะธะฒะฐัะธั โ ยซะฝะต ัะพัั ัะตัััั ะฟัะพะณัะตััยป) |
