# Фаза 6: QA — Тест-кейсы и чеклисты

---

## 1. Тест-кейсы

### Onboarding

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-001 | Первый запуск | Чистая установка | 1. Открыть приложение | Splash → Onboarding шаг 1 | Critical |
| TC-002 | Прохождение онбординга | Шаг 1 | 1. Пролистать все 3 шага 2. Нажать "Начать" | Переход на главный экран, onboarding не повторяется | Critical |
| TC-003 | Выбор языка при онбординге | Шаг 3 | 1. Выбрать английский | Язык интерфейса меняется на EN | High |
| TC-004 | Повторный запуск после онбординга | Онбординг пройден | 1. Перезапустить приложение | Сразу главный экран | Critical |

### Главный экран

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-010 | Отображение daily set | Онбординг пройден | 1. Открыть Home | Карточка ежедневного набора с темой и прогрессом | Critical |
| TC-011 | Начало ежедневной игры | Home экран | 1. Нажать "Играть" на daily set | Переход к game/daily, первая мини-игра | Critical |
| TC-012 | Отображение стрика | Есть активный стрик | 1. Открыть Home | StreakBadge показывает кол-во дней | High |
| TC-013 | Пустое состояние без сети | Нет интернета | 1. Открыть Home | Показано сообщение об офлайн-режиме | High |
| TC-014 | Баннерная реклама | Прошло 3+ игры | 1. Открыть Home | Баннер рекламы внизу экрана, не перекрывает контент | Medium |

### Игры

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-020 | Анаграмма — правильный ответ | Игра анаграмма | 1. Расставить буквы правильно 2. Нажать "Проверить" | Зелёная анимация, +очки, факт | Critical |
| TC-021 | Анаграмма — неправильный ответ | Игра анаграмма | 1. Расставить буквы неправильно 2. "Проверить" | Красная анимация, 0 очков, факт | Critical |
| TC-022 | Анаграмма — подсказка | Игра анаграмма | 1. Нажать "Подсказка" 2. Посмотреть rewarded ad | Одна буква встаёт на место | High |
| TC-023 | Угадай слово — полный цикл | Игра Wordle | 1. Ввести слово 2. Повторить до 6 раз | Цветовая индикация букв (зелёный/жёлтый/серый) | Critical |
| TC-024 | Угадай слово — клавиатура | Игра Wordle | 1. Ввести несколько слов | Клавиатура окрашивает использованные буквы | High |
| TC-025 | Составь слова — найти все | Игра Compose | 1. Найти все допустимые слова | Счётчик обновляется, все слова отмечены | High |
| TC-026 | Цепочка слов — полный путь | Игра Chain | 1. Пройти цепочку от start до end | Каждый шаг подсвечивается, success при завершении | High |
| TC-027 | Поиск слов — выделение | Игра Search | 1. Провести пальцем по слову в сетке | Слово подсвечивается, вычёркивается из списка | High |
| TC-028 | Переход между играми daily set | Внутри daily set | 1. Завершить игру 1 | Автопереход к игре 2, progress bar обновлён | Critical |
| TC-029 | Завершение daily set | Игра 5 из 5 | 1. Завершить последнюю игру | Переход на Results modal | Critical |

### Результаты

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-030 | Отображение результатов | Daily set завершён | 1. Экран Results | Счёт X/5, стрик, позиция, interstitial ad | Critical |
| TC-031 | Поделиться результатом | Results экран | 1. Нажать "Поделиться" | Системный share sheet с текстом результата | High |
| TC-032 | Interstitial при завершении | 4+ игры, cooldown прошёл | 1. Завершить daily set | Interstitial реклама перед результатами | Medium |

### Факты

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-040 | Отображение факта после игры | Игра завершена | 1. Смотреть экран факта | Факт с источником и иллюстрацией | High |
| TC-041 | Поделиться фактом | Экран факта | 1. Нажать "Поделиться" | Share sheet с текстом факта | Medium |

### Бесконечный режим

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-050 | Выбор типа игры | Вкладка Infinite | 1. Выбрать "Анаграмма" | Загрузка случайного вопроса анаграммы | High |
| TC-051 | Случайная игра | Вкладка Infinite | 1. Нажать "Случайная игра" | Случайный тип мини-игры | Medium |

### Лидерборд

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-060 | Ежедневный лидерборд | Вкладка Leaderboard | 1. Выбрать "Сегодня" | Список с позициями, текущий пользователь подсвечен | High |
| TC-061 | Переключение периодов | Вкладка Leaderboard | 1. Переключить daily/weekly/alltime | Данные обновляются для каждого периода | Medium |

### Профиль

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-070 | Статистика | Вкладка Profile | 1. Открыть профиль | StatCards с играми, %, стриком. HeatmapCalendar | High |
| TC-071 | Установка никнейма | Нет никнейма | 1. Нажать на аватар 2. Ввести ник | Nickname modal, сохранение, отображение | High |
| TC-072 | Валидация никнейма | Nickname modal | 1. Ввести < 3 символа | Кнопка "Сохранить" неактивна | Medium |

### Настройки

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-080 | Смена темы | Settings | 1. Переключить на "Тёмная" | Тема немедленно меняется | High |
| TC-081 | Смена языка | Settings | 1. Переключить RU → EN | Весь UI переключается на English | High |
| TC-082 | Выключить звук | Settings | 1. Выключить Sound | Звуки отключены в играх | Medium |
| TC-083 | Выключить хаптику | Settings | 1. Выключить Haptics | Вибрации отключены | Medium |
| TC-084 | Уведомления | Settings | 1. Включить уведомления | Запрос разрешения, ежедневное напоминание | High |

### Стрик

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-090 | Стрик +1 | Стрик активен, новый день | 1. Завершить daily set | Стрик увеличивается на 1 | Critical |
| TC-091 | Стрик milestone 7 дней | Стрик = 7 | 1. Завершить daily set | Streak milestone modal с celebration | High |
| TC-092 | Стрик сброс | Пропущен 1 день | 1. Открыть приложение | Стрик сбрасывается в 1 | High |

### Реклама

| TC-ID | Сценарий | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-100 | Grace period | < 3 игры сыграно | 1. Играть | Никакой interstitial рекламы | Critical |
| TC-101 | Interstitial cooldown | Показан < 120с назад | 1. Завершить игру | Нет interstitial | High |
| TC-102 | Rewarded ad → подсказка | В игре | 1. Нажать "Подсказка" 2. Посмотреть видео | Подсказка активирована | High |
| TC-103 | Ошибка загрузки рекламы | Нет сети | 1. Ожидать рекламу | Приложение не crash, продолжает без рекламы | High |
| TC-104 | Daily cap (10 interstitials) | 10 показано | 1. Играть ещё | Нет больше interstitial на сегодня | Medium |

---

## 2. Чеклисты публикации

### App Store (iOS)

- [ ] Соответствие Human Interface Guidelines
- [ ] Нет private API usage
- [ ] Тестирование на iPhone SE (2nd gen) — iPhone 16 Pro Max
- [ ] Ориентация: только portrait
- [ ] App Privacy (nutrition labels) заполнены
- [ ] IDFA disclosure (для AdMob)
- [ ] ATT (App Tracking Transparency) диалог перед рекламой
- [ ] Screenshots: 6.7", 6.5", 5.5" размеры
- [ ] Описание на русском и английском
- [ ] Ключевые слова для ASO
- [ ] Категория: Games → Word
- [ ] Возрастной рейтинг: 4+ (без откровенного контента)
- [ ] Политика конфиденциальности (URL)
- [ ] Нет crash при запуске
- [ ] Корректная работа без сети (offline mode)
- [ ] Все ссылки рабочие (factSourceUrl)
- [ ] SplashScreen отображается корректно
- [ ] Dark mode работает

### Google Play (Android)

- [ ] Target API Level ≥ 34
- [ ] Data Safety form заполнена
- [ ] Content rating questionnaire
- [ ] App signing by Google Play
- [ ] Screenshots: phone + 7" tablet + 10" tablet
- [ ] Feature graphic (1024x500)
- [ ] Ads declaration (приложение содержит рекламу)
- [ ] Тестирование на разных DPI
- [ ] Permissions обоснованы и минимальны (INTERNET, VIBRATE)
- [ ] ProGuard/R8 не ломает приложение
- [ ] 64-bit APK/AAB
- [ ] Описание на русском и английском

### RuStore

- [ ] Соответствие требованиям RuStore
- [ ] APK/AAB загружен
- [ ] Описание на русском языке (обязательно)
- [ ] Политика конфиденциальности на русском
- [ ] Yandex Mobile Ads SDK интегрирован (v2+)
- [ ] Тестирование на российских устройствах
- [ ] Категория и теги

### Huawei AppGallery

- [ ] Нет жёсткой зависимости от GMS (graceful fallback)
- [ ] HMS Core интеграция (для push, если нужна)
- [ ] Тестирование на Huawei устройстве без GMS
- [ ] Описание на русском и английском
- [ ] AdMob работает (или fallback)

---

## 3. Производительность

| Метрика | Целевое значение | Как измерить |
|---------|-----------------|--------------|
| Холодный старт | < 2с | Секундомер / Flipper |
| TTI (Time to Interactive) | < 3с | Flipper |
| FPS при скролле | ≥ 55fps | Dev menu → Perf Monitor |
| Использование RAM | < 150MB | Flipper / Xcode Instruments |
| Размер APK | < 50MB | `eas build` output |
| Размер IPA | < 60MB | `eas build` output |
| API response time | < 500мс | Swagger / Postman |
| JS Bundle size | < 5MB | Metro bundler output |
| Анимации | 60fps | react-native-reanimated UI thread |

---

## 4. Безопасность

- [ ] API ключи в .env, не в коде (✓ используются constants/ads.ts с тестовыми ID)
- [ ] .env в .gitignore (✓)
- [ ] HTTPS для всех API запросов (через config.ts API_URL)
- [ ] Валидация данных на сервере (class-validator)
- [ ] SQL injection защита (Prisma параметризованные запросы ✓)
- [ ] Rate limiting на API (ThrottlerGuard ✓)
- [ ] Чувствительные данные в SecureStore (⚠ BUG-006: fallback на AsyncStorage)
- [ ] Нет логирования токенов в production (analytics.ts ✓)
- [ ] CORS настроен правильно
- [ ] Helmet middleware включен
- [ ] JWT expires (refresh token flow)

---

## 5. Проверка рекламы

- [ ] Тестовые ID работают в development (ca-app-pub-3940256099942544/*)
- [ ] Баннер не перекрывает игровой контент
- [ ] Interstitial показывается ТОЛЬКО после завершения игры
- [ ] Grace period: 0 interstitial в первых 3 играх
- [ ] Cooldown: мин 120с между interstitials
- [ ] Daily cap: макс 10 interstitials в день
- [ ] Rewarded video выдаёт подсказку после полного просмотра
- [ ] Приложение работает при ошибке загрузки рекламы (graceful)
- [ ] Нет crash при показе/закрытии рекламы
- [ ] AdMob политики не нарушены (нет случайных кликов, нет размещения рядом с навигацией)

---

## 6. i18n и Accessibility

- [ ] Все строки в ru.json и en.json (нет хардкоженного текста)
- [ ] Переключение языка применяется мгновенно
- [ ] Русский язык корректно отображается (кириллица, длина строк)
- [ ] Английский язык полный (все ключи переведены)
- [ ] VoiceOver/TalkBack базовая поддержка
- [ ] Минимальный размер touch target: 44x44pt
- [ ] Достаточный контраст текста в обеих темах
- [ ] Шрифт Nunito загружается (fallback на системный)
