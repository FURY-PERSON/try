# –§–∞–∑–∞ 2: –ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫ ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π v7

> **–î–∞—Ç–∞:** 2026-02-26
> **–°—Ç–∞—Ç—É—Å:** –ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (8 –∑–∞–¥–∞—á: 3 Core-—É–ª—É—á—à–µ–Ω–∏—è, 3 UI-–∏–∑–º–µ–Ω–µ–Ω–∏—è, 2 Leaderboard-–∏–∑–º–µ–Ω–µ–Ω–∏—è)
> **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö/–ø–æ–¥–±–æ—Ä–∫–∞—Ö/—Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —Å–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã, –ø–µ—Ä–µ–¥–µ–ª–∫–∞ heatmap, —Å—Ç—Ä–∏–∫-–ª–∏–¥–µ—Ä–±–æ—Ä–¥, –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∏–≥—Ä–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ–∑–∏—Ü–∏—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ, —Å—á—ë—Ç—á–∏–∫ –Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ –±–µ–∑ –æ—á–∫–æ–≤

---

## FR-220: –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö, —Ñ–∞–∫—Ç–∞—Ö –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–±–æ—Ä–∫–∞—Ö

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Core-—É–ª—É—á—à–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ —è —É–∂–µ —Ä–µ—à–∏–ª –∏–∑ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ / –ø–æ–¥–±–æ—Ä–∫–µ / —É—Ä–æ–≤–Ω–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–π—Ç–∏ –≤—Å—ë –¥–æ –∫–æ–Ω—Ü–∞.

### –û–ø–∏—Å–∞–Ω–∏–µ
–í–æ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–≥—Ä–∞–µ—Ç —Å –Ω–∞–±–æ—Ä–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ñ–∞–∫—Ç—ã –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –ø–æ–¥–±–æ—Ä–∫–∏), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å**: ¬´–†–µ—à–µ–Ω–æ X –∏–∑ Y¬ª –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ/—ç–∫—Ä–∞–Ω–µ —Ä–∞–∑–¥–µ–ª–∞.
2. **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ**: –≤—ã–¥–∞–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ** (–µ—â—ë –Ω–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ) –≤–æ–ø—Ä–æ—Å—ã.
3. **–ö–æ–≥–¥–∞ –≤—Å—ë —Ä–µ—à–µ–Ω–æ**: –ø–æ–∫–∞–∑–∞—Ç—å –≥–∞–ª–æ—á–∫—É (‚úÖ) –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∏ —Ç–µ–∫—Å—Ç ¬´–í—Å–µ —Ä–µ—à–µ–Ω—ã!¬ª.
4. **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏–≥—Ä–∞—Ç—å**: –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª ‚Äî –Ω–∞—á–∏–Ω–∞–µ—Ç —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞ (–≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å–Ω–æ–≤–∞).

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —ç–∫—Ä–∞–Ω—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### A. –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
**–§–∞–π–ª—ã:** `mobile/app/(tabs)/home/index.tsx` (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CategoryCard`)

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 397-407):**
```tsx
<Text style={[styles.categoryCount, { color: colors.textSecondary }]}>
  {category.availableCount > 0
    ? t('home.questionsAvailable', { count: category.availableCount })
    : t('home.allDone')}
</Text>
```
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `availableCount` (–¥–æ—Å—Ç—É–ø–Ω—ã—Ö) –±–µ–∑ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.

**–¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   üß™        ‚îÇ
‚îÇ   –ù–∞—É–∫–∞     ‚îÇ
‚îÇ  12 / 30    ‚îÇ  ‚Üê ¬´—Ä–µ—à–µ–Ω–æ / –≤—Å–µ–≥–æ¬ª
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ñë‚ñë‚ñë  ‚îÇ  ‚Üê –º–∏–Ω–∏-–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ò–ª–∏ –∫–æ–≥–¥–∞ –≤—Å—ë —Ä–µ—à–µ–Ω–æ:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   üß™  ‚úÖ    ‚îÇ  ‚Üê –≥–∞–ª–æ—á–∫–∞
‚îÇ   –ù–∞—É–∫–∞     ‚îÇ
‚îÇ  –í—Å–µ —Ä–µ—à–µ–Ω—ã ‚îÇ
‚îÇ  –ó–∞–Ω–æ–≤–æ ‚Üª   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (Backend ‚Äî Home Feed):**
–≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/v1/home/feed` –¥–æ–ª–∂–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:

```typescript
interface CategoryWithProgress {
  id: string;
  name: string;
  nameEn: string;
  slug: string;
  icon: string;
  color: string | null;
  totalCount: number;       // –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  answeredCount: number;    // –∫–æ–ª-–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª
  availableCount: number;   // totalCount - answeredCount (–Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ)
  isCompleted: boolean;     // answeredCount === totalCount
}
```

**–§–∞–π–ª Backend:** `server/src/modules/home/home.service.ts`
- –ú–µ—Ç–æ–¥, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–æ–ª–∂–µ–Ω —Å—á–∏—Ç–∞—Ç—å `totalCount` (–≤—Å–µ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏) –∏ `answeredCount` (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å `UserQuestionHistory` –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

#### B. –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
**–§–∞–π–ª:** `mobile/app/category/[id].tsx`

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `availableCount` –∏ `totalCount`, –Ω–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç `count: 10` ‚Äî —Ç.–µ. –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–æ–≤–Ω–æ 10 –≤–æ–ø—Ä–æ—Å–æ–≤.

**–¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ¬´–†–µ—à–µ–Ω–æ X / Y¬ª –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä.
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–ò–≥—Ä–∞—Ç—å¬ª –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å **–≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ** –≤–æ–ø—Ä–æ—Å—ã (–∏–ª–∏ –ø–æ—Ä—Ü–∏—é, –µ—Å–ª–∏ –∏—Ö –±–æ–ª—å—à–µ 10 ‚Äî –≤ –ø–æ—Ä—Ü–∏–∏ –ø–æ 10).
- –ö–æ–≥–¥–∞ `availableCount === 0`:
  - –ü–æ–∫–∞–∑–∞—Ç—å ¬´–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Ä–µ—à–µ–Ω—ã! ‚úÖ¬ª
  - –ö–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª ‚Äî –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é.

#### C. –§–∞–∫—Ç—ã –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (Easy / Medium / Hard)
**–§–∞–π–ª:** `mobile/app/(tabs)/home/index.tsx` (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `DifficultyCard`)

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 413-478):**
–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `collectionsApi.start({ type: 'difficulty', difficulty, count: 10 })`.

**–¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ù–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å: ¬´5 / 40¬ª (—Ä–µ—à–µ–Ω–æ / –≤—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–∞–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏).
- –ö–æ–≥–¥–∞ –≤—Å–µ —Ä–µ—à–µ–Ω—ã ‚Äî –≥–∞–ª–æ—á–∫–∞ ‚úÖ + ¬´–í—Å–µ —Ä–µ—à–µ–Ω—ã¬ª + ¬´–ó–∞–Ω–æ–≤–æ¬ª.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (Backend ‚Äî Home Feed):**
–≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/v1/home/feed` –¥–æ–ª–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:

```typescript
interface DifficultyProgress {
  difficulty: 'easy' | 'medium' | 'hard';
  totalCount: number;
  answeredCount: number;
  availableCount: number;
  isCompleted: boolean;
}

// –í –æ—Ç–≤–µ—Ç–µ feed:
{
  ...
  difficultyProgress: DifficultyProgress[];
}
```

#### D. –ü–æ–¥–±–æ—Ä–∫–∏ (Collections)
**–§–∞–π–ª—ã:** `mobile/app/(tabs)/home/index.tsx` (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CollectionCard`), `mobile/app/collection/[id].tsx`

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
–ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥–±–æ—Ä–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ `_count.questions`. –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ.

**–¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–¥–±–æ—Ä–∫–∏: ¬´8 / 15¬ª (—Ä–µ—à–µ–Ω–æ / –≤—Å–µ–≥–æ) + –º–∏–Ω–∏-–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä.
- –ö–æ–≥–¥–∞ –≤—Å—ë —Ä–µ—à–µ–Ω–æ ‚Äî –≥–∞–ª–æ—á–∫–∞ ‚úÖ + ¬´–í—Å–µ —Ä–µ—à–µ–Ω—ã¬ª + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏–≥—Ä–∞—Ç—å.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (Backend):**
–û—Ç–≤–µ—Ç `GET /api/v1/home/feed` –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:

```typescript
interface CollectionWithProgress extends CollectionSummary {
  answeredCount: number;    // —Ä–µ—à–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  isCompleted: boolean;
}
```

#### E. Backend ‚Äî ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª (Reset progress)

**–ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:**
```
POST /api/v1/collections/reset-progress
Body: {
  type: 'category' | 'difficulty' | 'collection';
  referenceId: string;   // categoryId / 'easy'|'medium'|'hard' / collectionId
}
Response: { success: true }
```

–õ–æ–≥–∏–∫–∞: —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ `UserQuestionHistory` –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—Å–ª–æ–∂–Ω–æ—Å—Ç–∏/–ø–æ–¥–±–æ—Ä–∫–∏ –ò–õ–ò –ø–æ–º–µ—á–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∫ ¬´—Å–±—Ä–æ—à–µ–Ω¬ª (–ø–æ —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞).

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –∏–∑ `UserQuestionHistory` (—ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É), –ª—É—á—à–µ –¥–æ–±–∞–≤–∏—Ç—å –≤ `UserCollectionProgress` –ø–æ–ª–µ `resetAt: DateTime?` ‚Äî –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –¥–æ `resetAt`.

#### F. Backend ‚Äî –°–µ—Å—Å–∏—è —Å –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏

–¢–µ–∫—É—â–∏–π `collectionsApi.start()` —É–∂–µ –∏—Å–∫–ª—é—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –Ω–µ–¥–∞–≤–Ω–æ (anti-repeat: 7 –¥–Ω–µ–π –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö, 14 –¥–Ω–µ–π –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö). –î–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω—É–∂–Ω–æ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞—Ç—å** –≤—Å–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–µ —Ç–æ–ª—å–∫–æ –Ω–µ–¥–∞–≤–Ω–∏–µ), –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–º—ë—Ç ¬´–ó–∞–Ω–æ–≤–æ¬ª.

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ `CollectionsService.startSession()`:**
- –ï—Å–ª–∏ `type === 'category'` –∏–ª–∏ `type === 'difficulty'` –∏–ª–∏ `type === 'collection'`:
  - –ò—Å–∫–ª—é—á–∏—Ç—å –í–°–ï –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–≥–¥–∞-–ª–∏–±–æ –æ—Ç–≤–µ—á–∞–ª (–∏–∑ `UserQuestionHistory`), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–µ–¥–∞–≤–Ω–∏–µ.
  - –£—á–∏—Ç—ã–≤–∞—Ç—å `resetAt` –∏–∑ `UserCollectionProgress` ‚Äî –µ—Å–ª–∏ –µ—Å—Ç—å —Å–±—Ä–æ—Å, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–æ –¥–∞—Ç—ã —Å–±—Ä–æ—Å–∞.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ¬´X / Y¬ª (—Ä–µ—à–µ–Ω–æ / –≤—Å–µ–≥–æ)
- AC-2: –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ¬´X / Y¬ª
- AC-3: –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–¥–±–æ—Ä–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ¬´X / Y¬ª
- AC-4: –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏–ª –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—Å–ª–æ–∂–Ω–æ—Å—Ç–∏/–ø–æ–¥–±–æ—Ä–∫–µ, –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–∞–ª–æ—á–∫—É ‚úÖ –∏ —Ç–µ–∫—Å—Ç ¬´–í—Å–µ —Ä–µ—à–µ–Ω—ã¬ª
- AC-5: –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã –≤ —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- AC-6: –ï—Å–ª–∏ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Ä–µ—à–µ–Ω—ã, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª
- AC-7: –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
- AC-8: –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- FR-071 (–ª–∏–¥–µ—Ä–±–æ—Ä–¥ ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/v1/collections/start`
- –¢–∞–±–ª–∏—Ü—ã: `UserQuestionHistory`, `UserCollectionProgress`

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è / Edge Cases
- –ï—Å–ª–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–±–∞–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ¬´–≤—Å—ë —Ä–µ—à–∏–ª¬ª ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (—É–∂–µ –Ω–µ 100%)
- –ü—Ä–∏ —Å–±—Ä–æ—Å–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö) –≤ –ø—Ä–æ—Ñ–∏–ª–µ **–Ω–µ** —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç–º–µ—Ç–∫–∞ ¬´—Ä–µ—à–µ–Ω–æ¬ª –¥–ª—è —Ü–µ–ª–µ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ú–∏–Ω–∏-–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è MVP, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ ¬´X / Y¬ª

### i18n –∫–ª—é—á–∏
```json
{
  "home.progress": "{{answered}} / {{total}}",
  "home.allCompleted": "–í—Å–µ —Ä–µ—à–µ–Ω—ã!",
  "home.playAgain": "–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ",
  "category.progress": "–†–µ—à–µ–Ω–æ {{answered}} –∏–∑ {{total}}",
  "category.allCompleted": "–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã!",
  "category.playAgain": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
}
```

---

## FR-221: –ö–Ω–æ–ø–∫–∞ ¬´–°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Core-—É–ª—É—á—à–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ¬´–°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–±–æ—Ä —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —á—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–µ–º–µ –∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª.

### –û–ø–∏—Å–∞–Ω–∏–µ
–ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ **–ø–æ—Å–ª–µ —Å–µ–∫—Ü–∏–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞** (Daily Set) –∏ **–ø–µ—Ä–µ–¥ —Å–µ–∫—Ü–∏–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –¥–æ–±–∞–≤–∏—Ç—å –∫—Ä—É–ø–Ω—É—é –∫–Ω–æ–ø–∫—É ¬´–°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª.

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

```
[Header: –§–∞–∫—Ç –∏–ª–∏ –§–µ–π–∫ | üî• streak]
[Hero: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –Ω–∞–±–æ—Ä ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–ò–≥—Ä–∞—Ç—å¬ª]

[üé≤ –°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã ‚Äî –∫–Ω–æ–ø–∫–∞]           ‚Üê –ù–û–í–û–ï

[–ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª]
[–°–ª–æ–∂–Ω–æ—Å—Ç—å: Easy / Medium / Hard]
[–ü–æ–¥–±–æ—Ä–∫–∏: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª]
[–†–µ–∫–ª–∞–º–∞]
```

### –î–∏–∑–∞–π–Ω –∫–Ω–æ–ø–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üé≤  –°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã                    ‚îÇ
‚îÇ      –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!               ‚îÇ
‚îÇ                            [–ò–≥—Ä–∞—Ç—å ‚Üí]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- –°—Ç–∏–ª—å: –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω Hero-–∫–∞—Ä—Ç–æ—á–∫–µ (LinearGradient), –Ω–æ –º–µ–Ω–µ–µ –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π
- –†–∞–∑–º–µ—Ä: –ø–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞ (—Å –æ—Ç—Å—Ç—É–ø–∞–º–∏)
- –ì—Ä–∞–¥–∏–µ–Ω—Ç: `gradients.warm` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π, —á—Ç–æ–±—ã –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç Daily Set

### –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–±–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ (Backend)

**–ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:**
```
POST /api/v1/collections/start
Body: {
  type: 'random',
  count: 10
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–æ–≤:**
1. –í–∑—è—Ç—å –í–°–ï –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (`status: 'approved'`).
2. –ò—Å–∫–ª—é—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–Ω–µ –æ—Ç–≤–µ—á–∞–ª** –Ω–∞ –≤–æ–ø—Ä–æ—Å ‚Äî –≤–∫–ª—é—á–∏—Ç—å.
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–æ—Ç–≤–µ—Ç–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ** ‚Äî –≤–∫–ª—é—á–∏—Ç—å, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ **‚â• 3 –¥–Ω–µ–π** —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∞.
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–æ—Ç–≤–µ—Ç–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ** ‚Äî –≤–∫–ª—é—á–∏—Ç—å, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ **‚â• 14 –¥–Ω–µ–π** —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∞.
3. –ò–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –≤—ã–±—Ä–∞—Ç—å `count` —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–ø–µ—Ä–µ–º–µ—à–∞—Ç—å).
4. –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –º–µ–Ω—å—à–µ, —á–µ–º `count` ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Å–∫–æ–ª—å–∫–æ –µ—Å—Ç—å.
5. –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ 0 ‚Äî –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (SQL-–ª–æ–≥–∏–∫–∞):**
```sql
-- –í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –æ—Ç–≤–µ—á–∞–ª
SELECT q.* FROM "Question" q
WHERE q.status = 'approved'
  AND q.id NOT IN (SELECT "questionId" FROM "UserQuestionHistory" WHERE "userId" = $userId)

UNION

-- –í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ >= 3 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
SELECT q.* FROM "Question" q
JOIN "UserQuestionHistory" h ON h."questionId" = q.id AND h."userId" = $userId
WHERE q.status = 'approved'
  AND h."isCorrect" = false
  AND h."answeredAt" < NOW() - INTERVAL '3 days'

UNION

-- –í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ >= 14 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
SELECT q.* FROM "Question" q
JOIN "UserQuestionHistory" h ON h."questionId" = q.id AND h."userId" = $userId
WHERE q.status = 'approved'
  AND h."isCorrect" = true
  AND h."answeredAt" < NOW() - INTERVAL '14 days'
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤ `UserQuestionHistory` (–æ—Ç–≤–µ—á–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑), —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ–¥–Ω–∏–π** –æ—Ç–≤–µ—Ç.

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

**Backend:**
- `server/src/modules/collections/collections.service.ts` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `type: 'random'`
- `server/src/modules/collections/dto/start-session.dto.ts` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `'random'` –≤ enum —Ç–∏–ø–æ–≤

**Mobile:**
- `mobile/app/(tabs)/home/index.tsx` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –º–µ–∂–¥—É Daily Set –∏ Categories
- `mobile/src/features/collections/api/collectionsApi.ts` ‚Äî —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `type`, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å `'random'`
- `mobile/src/i18n/locales/en.json`, `ru.json` ‚Äî –Ω–æ–≤—ã–µ –∫–ª—é—á–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ ¬´–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤¬ª

–ï—Å–ª–∏ backend –≤–µ—Ä–Ω—É–ª 0 –≤–æ–ø—Ä–æ—Å–æ–≤:
- –ü–æ–∫–∞–∑–∞—Ç—å `Alert` —Å —Ç–µ–∫—Å—Ç–æ–º: ¬´–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ!¬ª
- –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –º–µ–∂–¥—É –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª
- AC-2: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–µ—Å—Å–∏—è —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- AC-3: –í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ –æ—Ç–≤–µ—á–∞–ª, –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –≤—ã–±–æ—Ä–∫—É
- AC-4: –í–æ–ø—Ä–æ—Å—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º –≤–∫–ª—é—á–∞—é—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ ‚â• 3 –¥–Ω–µ–π
- AC-5: –í–æ–ø—Ä–æ—Å—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º –≤–∫–ª—é—á–∞—é—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ ‚â• 14 –¥–Ω–µ–π
- AC-6: –í–æ–ø—Ä–æ—Å—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- AC-7: –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏–≥—Ä–∞ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è
- AC-8: –ö–Ω–æ–ø–∫–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞, –Ω–æ —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –¢–∞–±–ª–∏—Ü—ã: `Question`, `UserQuestionHistory`
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `POST /api/v1/collections/start`

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### i18n –∫–ª—é—á–∏
```json
{
  "home.randomFacts": "–°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã",
  "home.randomFactsDesc": "–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!",
  "home.noQuestionsAvailable": "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ!"
}
```

---

## FR-222: Heatmap-–∫–∞–ª–µ–Ω–¥–∞—Ä—å ‚Äî –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –Ω–∞–¥ –ø–ª–∏—Ç–∫–∞–º–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** UI-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ **–Ω–∞–¥** –ø–ª–∏—Ç–∫–∞–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∞ –Ω–µ —Å–ª–µ–≤–∞ –æ—Ç –Ω–∏—Ö, —á—Ç–æ–±—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—å –±—ã–ª –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ –ø–æ—Ö–æ–∂ –Ω–∞ GitHub-style heatmap.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `HeatmapCalendar` (—Ñ–∞–π–ª `mobile/src/features/profile/components/HeatmapCalendar.tsx`) –º–µ—Ç–∫–∏ –º–µ—Å—è—Ü–µ–≤ —É–∂–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –Ω–∞–¥ –ø–ª–∏—Ç–∫–∞–º–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º `monthRow`. –û–¥–Ω–∞–∫–æ —Å–ª–µ–≤–∞ –æ—Ç –ø–ª–∏—Ç–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ (–ü–Ω, –°—Ä, –ü—Ç) –≤ –≤–∏–¥–µ `dayLabelsOverlay`, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å –º–µ—Å—è—Ü–∞–º–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —á—Ç–æ –º–µ—Ç–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã ¬´—Å–ª–µ–≤–∞¬ª.

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å—Ç—Ä–æ–∫–∏ 91-159):
```
[–ü—É—Å—Ç–æ–π –æ—Ç—Å—Ç—É–ø 28px]  [–Ø–Ω–≤  –§–µ–≤  –ú–∞—Ä  –ê–ø—Ä ...]   ‚Üê –º–µ—Å—è—Ü—ã (position: absolute)
[–ü–Ω                ]  [‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ...]    ‚Üê –ø–ª–∏—Ç–∫–∏ (—Å–∫—Ä–æ–ª–ª)
[   –°—Ä             ]  [‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ...]
[      –ü—Ç          ]  [‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ† ...]
```

–ú–µ—Ç–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ (–ü–Ω, –°—Ä, –ü—Ç) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `position: absolute` —Å `top` —Å–º–µ—â–µ–Ω–∏—è–º–∏ –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ —à–∏—Ä–∏–Ω–æ–π 28px.

### –¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–ú–µ—Å—è—Ü—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—á—ë—Ç–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω—ã** –æ—Ç –ø–ª–∏—Ç–æ–∫ –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —Å—Ç—Ä–æ–≥–æ **–Ω–∞–¥** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏ (–Ω–µ–¥–µ–ª—è–º–∏), –∫–∞–∫ –≤ GitHub contribution graph:

```
                    –Ø–Ω–≤        –§–µ–≤        –ú–∞—Ä
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         –ü–Ω   ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†
         –°—Ä   ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†
         –ü—Ç   ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†  ‚ñ† ‚ñ† ‚ñ† ‚ñ† ‚ñ†
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

1. **–£–≤–µ–ª–∏—á–∏—Ç—å –æ—Ç—Å—Ç—É–ø** `monthRow.height` —Å 14 –¥–æ 18, —á—Ç–æ–±—ã –º–µ—Ç–∫–∏ –º–µ—Å—è—Ü–µ–≤ –Ω–µ –ø—Ä–∏–∂–∏–º–∞–ª–∏—Å—å –∫ –ø–ª–∏—Ç–∫–∞–º
2. **–£–≤–µ–ª–∏—á–∏—Ç—å —à—Ä–∏—Ñ—Ç** –º–µ—Ç–æ–∫ –º–µ—Å—è—Ü–µ–≤ —Å 9 –¥–æ 10 –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
3. **–£–±—Ä–∞—Ç—å –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏** ‚Äî –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –∏ –¥—É–±–ª–∏—Ä—É—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; –µ—Å–ª–∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å ‚Äî —É–º–µ–Ω—å—à–∏—Ç—å —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å). –†–µ—à–µ–Ω–∏–µ –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –µ—Å–ª–∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –≤–∞–∂–Ω—ã ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–µ—Å—è—Ü—ã –≤–∏–∑—É–∞–ª—å–Ω–æ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç.
4. **–ú–µ—Å—è—Ü—ã –¥–æ–ª–∂–Ω—ã —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –ø–ª–∏—Ç–∫–∞–º–∏** ‚Äî —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–∂–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç (–æ–±–∞ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ ScrollView), —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º —Å–∫—Ä–æ–ª–ª–µ –º–µ—Ç–∫–∏ –º–µ—Å—è—Ü–µ–≤ –Ω–µ –æ—Ç—Å—Ç–∞—é—Ç.

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã
- `mobile/src/features/profile/components/HeatmapCalendar.tsx`

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- AC-1: –ù–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã **–Ω–∞–¥** —Å—Ç–æ–ª–±—Ü–∞–º–∏ –ø–ª–∏—Ç–æ–∫, –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç —Å–∞–º–∏—Ö –ø–ª–∏—Ç–æ–∫
- AC-2: –ú–µ—Ç–∫–∏ –º–µ—Å—è—Ü–µ–≤ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –ø–ª–∏—Ç–∫–∞–º–∏
- AC-3: –ú–µ—Å—è—Ü –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–¥ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–µ–π —ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞
- AC-4: –®—Ä–∏—Ñ—Ç –º–µ—Å—è—Ü–µ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä—É–ø–Ω—ã–π –¥–ª—è —á—Ç–µ–Ω–∏—è (‚â• 10)
- AC-5: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ

### –¢—Ä–µ–±—É–µ—Ç backend: –ù–µ—Ç

---

## FR-223: –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ —Å—Ç—Ä–∏–∫—É ‚Äî —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–µ—Ä–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Leaderboard-–∏–∑–º–µ–Ω–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –≤ —Ä–µ–∂–∏–º–µ ¬´–ü–æ —Å—Ç—Ä–∏–∫—É¬ª —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥** (–Ω–µ –¥–Ω–µ–π —Å—Ç—Ä–∏–∫–∞), —á—Ç–æ–±—ã —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—å—Å—è –≤ –±–µ–∑–æ—à–∏–±–æ—á–Ω—ã—Ö —Å–µ—Ä–∏—è—Ö.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ ¬´–ü–æ —Å—Ç—Ä–∏–∫—É¬ª (FR-071b) —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ `currentStreak` (—Ç–µ–∫—É—â–∏–π —Å—Ç—Ä–∏–∫ –¥–Ω–µ–π). –û–¥–Ω–∞–∫–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞—Ç—å –ø–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–µ—Ä–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥** ‚Äî —ç—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –¥—Ä—É–≥–∞—è –º–µ—Ç—Ä–∏–∫–∞.

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
**Backend** (`server/src/modules/leaderboard/leaderboard.service.ts`, —Å—Ç—Ä–æ–∫–∏ 88-128):
```typescript
async getStreakLeaderboard(userId: string): Promise<LeaderboardResponse> {
  const users = await this.prisma.user.findMany({
    where: { currentStreak: { gt: 0 } },
    orderBy: [
      { currentStreak: 'desc' },
      { bestStreak: 'desc' },
    ],
  });
  // ...
}
```
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—è `User.currentStreak` –∏ `User.bestStreak` ‚Äî —ç—Ç–æ **—Å—Ç—Ä–∏–∫ –¥–Ω–µ–π** (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –¥–Ω–∏ –∏–≥—Ä—ã), –∞ –Ω–µ —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.

### –ù–æ–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ ¬´Streak¬ª –¥–ª—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞

**Answer Streak (—Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥)** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—Ç–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –±–µ–∑ –µ–¥–∏–Ω–æ–π –æ—à–∏–±–∫–∏ –ø–æ–¥—Ä—è–¥.

–ü—Ä–∏–º–µ—Ä:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A: ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ‚ùå‚úÖ‚úÖ‚úÖ ‚Üí answer streak = 5 (–ø–µ—Ä–≤—ã–µ 5 –ø–æ–¥—Ä—è–¥)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B: ‚úÖ‚úÖ‚ùå‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ‚úÖ ‚Üí answer streak = 7 (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –ø–æ–¥—Ä—è–¥)

–õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–ª—É—á—à–∏–π** (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π) answer streak, –∞ –Ω–µ —Ç–µ–∫—É—â–∏–π.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π): –ü–æ–ª—è –≤ –º–æ–¥–µ–ª–∏ User**
–î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É `User` –¥–≤–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª—è:

```prisma
model User {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
  currentAnswerStreak  Int  @default(0)  // —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
  bestAnswerStreak     Int  @default(0)  // –ª—É—á—à–∞—è —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ** (–≤ `CollectionsService.submitResults()` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–º):
```typescript
// –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
user.currentAnswerStreak += 1;
if (user.currentAnswerStreak > user.bestAnswerStreak) {
  user.bestAnswerStreak = user.currentAnswerStreak;
}

// –ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
user.currentAnswerStreak = 0;
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è Backend

**–§–∞–π–ª:** `server/src/modules/leaderboard/leaderboard.service.ts`

–ú–µ—Ç–æ–¥ `getStreakLeaderboard()` ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å:

```typescript
async getStreakLeaderboard(userId: string): Promise<LeaderboardResponse> {
  const users = await this.prisma.user.findMany({
    where: { bestAnswerStreak: { gt: 0 } },
    select: {
      id: true,
      nickname: true,
      avatarEmoji: true,
      bestAnswerStreak: true,
      currentAnswerStreak: true,
    },
    orderBy: [
      { bestAnswerStreak: 'desc' },
      { currentAnswerStreak: 'desc' },
    ],
  });
  // ... —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–µ–∫—É—â–µ–º—É
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```typescript
{
  entries: [{
    rank: number;
    userId: string;
    nickname: string;
    bestAnswerStreak: number;     // –ª—É—á—à–∞—è —Å–µ—Ä–∏—è (–æ—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞)
    currentAnswerStreak: number;  // —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
  }];
  userPosition: number | null;
  totalPlayers: number;
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è Mobile

**–§–∞–π–ª:** `mobile/src/features/leaderboard/components/LeaderboardEntry.tsx`

–í —Ä–µ–∂–∏–º–µ `streak` –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
- –û—Å–Ω–æ–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: `bestAnswerStreak` (–ª—É—á—à–∞—è —Å–µ—Ä–∏—è)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: `currentAnswerStreak` (—Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è), –µ—Å–ª–∏ > 0

```
#1  ü¶ä –•–∏—Ç—Ä—ã–π–õ–∏—Å    üèÜ 47    üî• 12
                     –ª—É—á—à–∞—è   —Ç–µ–∫—É—â–∞—è
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–æ–≤

**–§–∞–π–ª:** `mobile/src/shared/types/leaderboard.ts`

–û–±–Ω–æ–≤–∏—Ç—å `LeaderboardEntryDto`:
```typescript
export interface LeaderboardEntryDto {
  rank: number;
  userId: string;
  nickname: string | null;
  avatarEmoji: string | null;
  correctAnswers: number;
  totalQuestions: number;
  score: number;
  totalTimeSeconds: number;
  currentStreak?: number;      // –¥–Ω–µ–≤–Ω–æ–π —Å—Ç—Ä–∏–∫ (–æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  bestStreak?: number;         // –¥–Ω–µ–≤–Ω–æ–π —Å—Ç—Ä–∏–∫ (–æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  bestAnswerStreak?: number;   // –ù–û–í–û–ï: –ª—É—á—à–∞—è —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
  currentAnswerStreak?: number; // –ù–û–í–û–ï: —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏ –ø–æ–¥–∞—á–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–∞–π–ª:** `server/src/modules/collections/collections.service.ts` (–º–µ—Ç–æ–¥ `submitResults()`)

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ —Å–µ—Å—Å–∏–∏ ‚Äî –æ–±–Ω–æ–≤–ª—è—Ç—å `currentAnswerStreak` –∏ `bestAnswerStreak`:

```typescript
for (const answer of answers) {
  if (answer.isCorrect) {
    currentAnswerStreak++;
    if (currentAnswerStreak > user.bestAnswerStreak) {
      bestAnswerStreak = currentAnswerStreak;
    }
  } else {
    currentAnswerStreak = 0;
  }
}

// –í –∫–æ–Ω—Ü–µ ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å user
await this.prisma.user.update({
  where: { id: userId },
  data: { currentAnswerStreak, bestAnswerStreak },
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π `bestAnswerStreak` –∏ `currentAnswerStreak` –±—É–¥—É—Ç —Ä–∞–≤–Ω—ã 0. –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî –º–µ—Ç—Ä–∏–∫–∞ –Ω–∞—á–Ω—ë—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —Å –º–æ–º–µ–Ω—Ç–∞ –¥–µ–ø–ª–æ—è. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∏–∑ `UserQuestionHistory` (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ `answeredAt` –∏ –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–µ—Ä–∏—é), –Ω–æ —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –õ–∏–¥–µ—Ä–±–æ—Ä–¥ ¬´–ü–æ —Å—Ç—Ä–∏–∫—É¬ª —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ `bestAnswerStreak` (–ª—É—á—à–∞—è —Å–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥)
- AC-2: –í –∑–∞–ø–∏—Å–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª—É—á—à–∞—è —Å–µ—Ä–∏—è –∏ —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è
- AC-3: –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ `currentAnswerStreak` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
- AC-4: –ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ `currentAnswerStreak` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 0
- AC-5: –ï—Å–ª–∏ `currentAnswerStreak` –ø—Ä–µ–≤—ã—à–∞–µ—Ç `bestAnswerStreak` ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `bestAnswerStreak`
- AC-6: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `bestAnswerStreak = 0` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ —Å—Ç—Ä–∏–∫–∞
- AC-7: –ü—Ä–∏ —Ä–∞–≤–Ω–æ–º `bestAnswerStreak` –≤—ã—à–µ —Å—Ç–æ–∏—Ç —Ç–æ—Ç, —É –∫–æ–≥–æ –≤—ã—à–µ `currentAnswerStreak`

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- FR-071b (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è streak-–ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ ‚Äî –ø–µ—Ä–µ–¥–µ–ª–∫–∞)
- –ú–∏–≥—Ä–∞—Ü–∏—è Prisma (–Ω–æ–≤—ã–µ –ø–æ–ª—è)

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### i18n –∫–ª—é—á–∏
```json
{
  "leaderboard.bestAnswerStreak": "–õ—É—á—à–∞—è —Å–µ—Ä–∏—è",
  "leaderboard.currentAnswerStreak": "–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è",
  "leaderboard.answersInRow": "{{count}} –ø–æ–¥—Ä—è–¥"
}
```

---

## FR-224: –ü–æ–∑–∏—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Leaderboard-—É–ª—É—á—à–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ –≤–º–µ—Å—Ç–µ —Å –±–ª–∏–∂–∞–π—à–∏–º–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞–º–∏ (1 –≤—ã—à–µ –∏ 1 –Ω–∏–∂–µ), –¥–∞–∂–µ –µ—Å–ª–∏ —è –Ω–µ –≤—Ö–æ–∂—É –≤ —Ç–æ–ø-5, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å —Å–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –∏ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è –æ–±–æ–≥–Ω–∞—Ç—å —Å–æ—Å–µ–¥–µ–π.

### –û–ø–∏—Å–∞–Ω–∏–µ
–ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–æ–ø-5** –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞, –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞ (–ø–æ—Å–ª–µ —Ç–æ–ø-–∑–∞–ø–∏—Å–µ–π) –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ —Å 3 —Å—Ç—Ä–æ–∫–∞–º–∏:

```
[ –¢–æ–ø-5 –∑–∞–ø–∏—Å–µ–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ ]
    ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ     ‚Üê —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ¬´...¬ª
#41  üêº –õ–æ–≤–∫–∏–π–ú–µ–¥–≤–µ–¥—å   520    ‚Üê –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –≤—ã—à–µ
#42  ü¶ä –¢—ã–°–∞–º–¢–µ–∫—É—â–∏–π    515    ‚Üê —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–≤—ã–¥–µ–ª–µ–Ω)
#43  üê∫ –î–∏–∫–∏–π–í–æ–ª–∫       510    ‚Üê –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –Ω–∏–∂–µ
```

### –î–µ—Ç–∞–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

1. **–£—Å–ª–æ–≤–∏–µ –ø–æ–∫–∞–∑–∞:** –ë–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è > 5.
2. **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1-–º –º–µ—Å—Ç–µ —Å–≤–µ—Ä—Ö —Ç–æ–ø–∞** (—Ç.–µ. #6): —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ¬´...¬ª –Ω–µ –Ω—É–∂–µ–Ω ‚Äî –±–ª–æ–∫ –ø—Ä–∏–º—ã–∫–∞–µ—Ç –∫ —Ç–æ–ø-5.
3. **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –º–µ—Å—Ç–µ:** –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ ¬´1 –≤—ã—à–µ¬ª + ¬´—Ç–µ–∫—É—â–∏–π¬ª (–±–µ–∑ —Å—Ç—Ä–æ–∫–∏ –Ω–∏–∂–µ).
4. **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1-–º –º–µ—Å—Ç–µ:** –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ ¬´—Ç–µ–∫—É—â–∏–π¬ª + ¬´1 –Ω–∏–∂–µ¬ª (–±–µ–∑ —Å—Ç—Ä–æ–∫–∏ –≤—ã—à–µ). –ù–æ —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –µ—Å–ª–∏ –æ–Ω –Ω–µ –≤ —Ç–æ–ø-5 ‚Äî –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ >= #6.
5. **–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª–µ–Ω (—Ñ–æ–Ω `colors.primary + '10'`, –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π –±–æ—Ä–¥–µ—Ä –∏–ª–∏ –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç).
6. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ **–≤—Å–µ–º —Ä–µ–∂–∏–º–∞–º** –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞: ¬´–ü–æ –æ—Ç–≤–µ—Ç–∞–º¬ª, ¬´–ü–æ –æ—á–∫–∞–º¬ª, ¬´–ü–æ —Å—Ç—Ä–∏–∫—É¬ª.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è Backend

**–§–∞–π–ª—ã:** `server/src/modules/leaderboard/leaderboard.service.ts`, `server/src/modules/leaderboard/leaderboard.controller.ts`

–†–∞—Å—à–∏—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç `LeaderboardResponse`:

```typescript
export interface LeaderboardResponse {
  entries: LeaderboardEntryResult[];       // —Ç–æ–ø-100 (–∫–∞–∫ —Å–µ–π—á–∞—Å)
  userPosition: number | null;
  totalPlayers: number;
  userContext?: {                           // –ù–û–í–û–ï
    above: LeaderboardEntryResult | null;   // –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –≤—ã—à–µ
    current: LeaderboardEntryResult;        // —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    below: LeaderboardEntryResult | null;   // –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –Ω–∏–∂–µ
  };
}
```

**–õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è `userContext`:**
- –ï—Å–ª–∏ `userPosition` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∏ `userPosition > 5`:
  - `above` = –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ `userPosition - 1` (–∏–∑ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞)
  - `current` = –∑–∞–ø–∏—Å—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `below` = –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ `userPosition + 1` (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- –ï—Å–ª–∏ `userPosition <= 5` ‚Äî `userContext` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è (null)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è Mobile

**–§–∞–π–ª—ã:**
- `mobile/app/(tabs)/leaderboard/index.tsx` ‚Äî —Ä–µ–Ω–¥–µ—Ä –±–ª–æ–∫–∞ `userContext`
- `mobile/src/features/leaderboard/components/LeaderboardList.tsx` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- `mobile/src/shared/types/leaderboard.ts` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞

**UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç ¬´UserContextBlock¬ª:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         ¬∑ ¬∑ ¬∑                       ‚îÇ  ‚Üê separator dots
‚îÇ  #41  üêº –õ–æ–≤–∫–∏–π–ú–µ–¥–≤–µ–¥—å      520    ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ #42  ü¶ä –¢—ã–°–∞–º             515  ‚îÇ ‚îÇ  ‚Üê highlighted row
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  #43  üê∫ –î–∏–∫–∏–π–í–æ–ª–∫           510    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ç–æ–ø-5, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- AC-2: –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –≤ —Ç–æ–ø-5, –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–ª–æ–∫ —Å –µ–≥–æ –ø–æ–∑–∏—Ü–∏–µ–π
- AC-3: –í –±–ª–æ–∫–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –≤—ã—à–µ
- AC-4: –í –±–ª–æ–∫–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –∑–∞–ø–∏—Å—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª–µ–Ω–∞)
- AC-5: –í –±–ª–æ–∫–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é –Ω–∏–∂–µ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- AC-6: –ú–µ–∂–¥—É —Ç–æ–ø-—Å–ø–∏—Å–∫–æ–º –∏ –±–ª–æ–∫–æ–º –ø–æ–∑–∏—Ü–∏–∏ –µ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
- AC-7: –ë–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Ä–µ–∂–∏–º–∞—Ö –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (–æ—Ç–≤–µ—Ç—ã, –æ—á–∫–∏, —Å—Ç—Ä–∏–∫)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- FR-071 (–ª–∏–¥–µ—Ä–±–æ—Ä–¥), FR-071a (–ø–æ –æ—á–∫–∞–º), FR-071b / FR-223 (–ø–æ —Å—Ç—Ä–∏–∫—É)

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### i18n –∫–ª—é—á–∏
```json
{
  "leaderboard.yourPosition": "–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è"
}
```

---

## FR-225: –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∏–≥—Ä–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –≤—ã—Ö–æ–¥–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Core-—É–ª—É—á—à–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ 10 —à—Ç—É–∫, –∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É –ø–æ —Å–≤–æ–µ–º—É –∂–µ–ª–∞–Ω–∏—é —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Å—Å–∏—é —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ 10 –≤–æ–ø—Ä–æ—Å–æ–≤:

```typescript
// mobile/app/category/[id].tsx, —Å—Ç—Ä–æ–∫–∞ 62
const session = await collectionsApi.start({
  type: 'category',
  categoryId: id,
  count: 10,  // –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û
});
```

–ü–æ—Å–ª–µ 10-–≥–æ –æ—Ç–≤–µ—Ç–∞ –∏–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–Ω—É–∂–¥–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∑–∞–Ω–æ–≤–æ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.

### –¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å **–≤—Å–µ –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã** (–±–µ–∑ –ª–∏–º–∏—Ç–∞ `count`):

```typescript
// mobile/app/category/[id].tsx ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ
const session = await collectionsApi.start({
  type: 'category',
  categoryId: id,
  // count –ù–ï –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è ‚Äî —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–∞—ë—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
});
```

**Backend:** –ï—Å–ª–∏ `count` –Ω–µ —É–∫–∞–∑–∞–Ω –∏–ª–∏ `count = 0` –¥–ª—è `type: 'category'`, –≤–µ—Ä–Ω—É—Ç—å **–≤—Å–µ** –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (—Å —É—á—ë—Ç–æ–º anti-repeat / –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–∑ FR-220).

#### 2. –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã

**–§–∞–π–ª:** `mobile/app/game/card.tsx`, `mobile/src/features/game/hooks/useCardGame.ts`

–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–≤ `useCardGame.ts`):
```typescript
// –ö–æ–≥–¥–∞ currentCardIndex === totalCards ‚Äî completed = true
// –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç submit –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ /modal/results
```

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
- –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ `currentCardIndex < totalCards` (–≥–¥–µ totalCards = –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤).
- –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å).
- **–ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ:** –Ω–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Å–ª–µ 10 –∫–∞—Ä—Ç–æ—á–µ–∫.

#### 3. –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (X) –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏–≥—Ä—ã

**–§–∞–π–ª:** `mobile/app/game/card.tsx`

–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´X¬ª (–∑–∞–∫—Ä—ã—Ç—å) –≤ –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª —ç–∫—Ä–∞–Ω–∞ –∏–≥—Ä—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ù–∞—É–∫–∞                     [‚úï]    ‚îÇ  ‚Üê –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
‚îÇ  3 / 27                           ‚îÇ  ‚Üê –ø—Ä–æ–≥—Ä–µ—Å—Å (–æ—Ç–≤–µ—á–µ–Ω–æ / –≤—Å–µ–≥–æ)
‚îÇ                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    –°–æ–ª–Ω—Ü–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–æ–∫—Ä—É–≥   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    –ó–µ–º–ª–∏                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚Üê –§–ï–ô–ö     –§–ê–ö–¢ ‚Üí       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- –ò–∫–æ–Ω–∫–∞: `Feather name="x"` (24px)
- –ü–æ–∑–∏—Ü–∏—è: –∞–±—Å–æ–ª—é—Ç–Ω–∞—è, –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª (—Å —É—á—ë—Ç–æ–º SafeArea)
- HitSlop: 8px –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞–∂–∞—Ç–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–ª—è collection mode** (–Ω–µ –¥–ª—è daily set, –≥–¥–µ –∏ —Ç–∞–∫ 10 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)

#### 4. –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ ¬´X¬ª ‚Äî **–Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Å—Ä–∞–∑—É**, –∞ –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                  ‚îÇ
‚îÇ    –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É?              ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ    –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ 7 –∏–∑ 27       ‚îÇ
‚îÇ    –≤–æ–ø—Ä–æ—Å–æ–≤. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç   ‚îÇ
‚îÇ    —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.                   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚îÇ ‚îÇ  –ó–∞–≤–µ—Ä—à–∏—Ç—å  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–Ω–æ–ø–∫–∏:**
- **¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª** (secondary/outline) ‚Äî –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏–≥—Ä–∞—Ç—å.
- **¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª** (primary/destructive) ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞ —É–∂–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª–∫–∏:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Native `Modal` –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Alert.alert –∫–∞–∫ fallback):

```typescript
const [showExitConfirm, setShowExitConfirm] = useState(false);

const handleClosePress = () => {
  setShowExitConfirm(true);
};

const handleConfirmExit = async () => {
  setShowExitConfirm(false);
  // 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞ —É–∂–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
  await submitPartialResults();
  // 2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  router.replace('/modal/results');
};

const handleCancelExit = () => {
  setShowExitConfirm(false);
};
```

#### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –¥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ–ª—å–∫–æ –∑–∞ **–æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ** –≤–æ–ø—Ä–æ—Å—ã.

**–§–∞–π–ª:** `mobile/src/features/game/hooks/useCardGame.ts`

–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `submitPartialResults()`:
```typescript
const submitPartialResults = useCallback(async () => {
  const { dailyProgress, sessionId } = useGameStore.getState();
  const answeredResults = dailyProgress.results; // —É–∂–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ

  if (answeredResults.length === 0) {
    // –ï—Å–ª–∏ –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–π—Ç–∏ –±–µ–∑ submit
    resetDailyProgress();
    return;
  }

  const gameResults = answeredResults.map((r) => ({
    questionId: r.questionId,
    result: r.correct ? 'correct' as const : 'incorrect' as const,
    timeSpentSeconds: Math.round(r.timeSpentMs / 1000),
  }));

  if (sessionId) {
    try {
      const submission = await collectionsApi.submit(sessionId, gameResults);
      setSubmissionResult({
        score: submission.score,
        correctAnswers: submission.correctAnswers,
        totalQuestions: submission.totalQuestions,
        totalTimeSeconds: submission.totalTimeSeconds,
        streak: submission.streak ?? 0,
        bestStreak: submission.bestStreak ?? 0,
        leaderboardPosition: 0,
        correctPercent: Math.round(
          (submission.correctAnswers / submission.totalQuestions) * 100,
        ),
        percentile: 0,
        totalPlayers: 0,
      });
    } catch {
      // fallback ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
    }
  }

  // –û–±–Ω–æ–≤–∏—Ç—å dailyProgress.totalCards –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö
  // —á—Ç–æ–±—ã results screen –ø–æ–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
  set((state) => ({
    dailyProgress: {
      ...state.dailyProgress,
      totalCards: answeredResults.length,
      completed: true,
    },
  }));
}, []);
```

**Backend –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** `CollectionsService.submit()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ `results` –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã ‚Äî –æ–Ω –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—á–µ–Ω–æ –Ω–∞ –í–°–ï –≤–æ–ø—Ä–æ—Å—ã —Å–µ—Å—Å–∏–∏. –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
- `totalQuestions` –≤ –æ—Ç–≤–µ—Ç–µ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∞ –Ω–µ –¥–ª–∏–Ω–∞ —Å–µ—Å—Å–∏–∏)
- –ù–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã **–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è** –≤ –∏—Å—Ç–æ—Ä–∏—é (—á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª–∏—Å—å —Å–Ω–æ–≤–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ)

**–§–∞–π–ª Backend:** `server/src/modules/collections/collections.service.ts` (–º–µ—Ç–æ–¥ `submit`)

–ò–∑–º–µ–Ω–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `totalQuestions` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **–ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –∞ –Ω–µ `session.questionIds.length`. –¢–µ–∫—É—â–∏–π –∫–æ–¥:
```typescript
return {
  correctAnswers,
  totalQuestions: session.questionIds.length,  // ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª–∏–Ω—É –≤—Å–µ–π —Å–µ—Å—Å–∏–∏
  // ...
};
```

–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞:
```typescript
return {
  correctAnswers,
  totalQuestions: dto.results.length,  // ‚Üê –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö
  // ...
};
```

–¢–∞–∫–∂–µ –≤ `userCollectionProgress`:
```typescript
await tx.userCollectionProgress.create({
  data: {
    userId,
    collectionType: session.type,
    referenceId: session.referenceId,
    difficulty: session.difficulty,
    correctAnswers,
    totalQuestions: dto.results.length,  // ‚Üê —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö
  },
});
```

#### 6. –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**–§–∞–π–ª:** `mobile/app/modal/results.tsx`

–≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `dailyProgress.results` –∏ `dailyProgress.totalCards`. –ï—Å–ª–∏ `totalCards` –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö ‚Äî –≤—Å—ë –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```
–†–µ–∑—É–ª—å—Ç–∞—Ç: 5 / 7
(–æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ 7 –∏–∑ 27 –≤–æ–ø—Ä–æ—Å–æ–≤, 5 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö)
```

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- ¬´–û—Ç–≤–µ—á–µ–Ω–æ: 7 –∏–∑ 27 –≤–æ–ø—Ä–æ—Å–æ–≤¬ª ‚Äî —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —ç—Ç–æ —á–∞—Å—Ç–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª ‚Äî –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ—Å—Ç–∞–≤—à–∏–º—Å—è –≤–æ–ø—Ä–æ—Å–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, v2)

#### 7. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏–≥—Ä—ã

–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π X:

```
–ù–∞—É–∫–∞  ‚Ä¢  3 / 27                    [‚úï]
```

–ò–ª–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–¥ —Ö–µ–¥–µ—Ä–æ–º:
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  3/27
```

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `mobile/app/category/[id].tsx` | –£–±—Ä–∞—Ç—å `count: 10`, –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å count |
| `mobile/app/game/card.tsx` | –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É X, –º–æ–¥–∞–ª–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä |
| `mobile/src/features/game/hooks/useCardGame.ts` | –î–æ–±–∞–≤–∏—Ç—å `submitPartialResults()`, —É–±—Ä–∞—Ç—å –∞–≤—Ç–æ-–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ N –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è collection mode |
| `mobile/src/features/game/stores/useGameStore.ts` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ partial submit (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ totalCards) |
| `mobile/app/modal/results.tsx` | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| `server/src/modules/collections/collections.service.ts` | –í–µ—Ä–Ω—É—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –µ—Å–ª–∏ count –Ω–µ —É–∫–∞–∑–∞–Ω; `totalQuestions` = `dto.results.length` |
| `mobile/src/i18n/locales/en.json`, `ru.json` | –ù–æ–≤—ã–µ –∫–ª—é—á–∏ |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–µ 10)
- AC-2: –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –µ—Å—Ç—å –Ω–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–º—ë—Ç X
- AC-3: –ù–∞ —ç–∫—Ä–∞–Ω–µ –∏–≥—Ä—ã (collection mode) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ X –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- AC-4: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ X –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É?¬ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
- AC-5: –ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª –≤ –º–æ–¥–∞–ª–∫–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –µ—ë –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ –∏–≥—Ä–µ
- AC-6: –ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤
- AC-7: –≠–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (N –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö / M –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö)
- AC-8: –ù–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏
- AC-9: –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å (–≤—Å–µ –æ—Ç–≤–µ—á–µ–Ω—ã) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- AC-10: –ù–∞ —ç–∫—Ä–∞–Ω–µ –∏–≥—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å ¬´X / Y¬ª (–æ—Ç–≤–µ—á–µ–Ω–æ / –≤—Å–µ–≥–æ)
- AC-11: –î–ª—è daily set –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è (–ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É 10 –∫–∞—Ä—Ç–æ—á–µ–∫ –±–µ–∑ X)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- FR-220 (–ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã —Å—á–∏—Ç–∞—Ç—å ¬´–Ω–µ—Ä–µ—à—ë–Ω–Ω—ã–º–∏¬ª)
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `POST /api/v1/collections/start`, `POST /api/v1/collections/{sessionId}/submit`

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è / Edge Cases
- **–ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:** –ï—Å–ª–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 0 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–ò–≥—Ä–∞—Ç—å¬ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (—Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
- **1 –≤–æ–ø—Ä–æ—Å:** –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ 1 –≤–æ–ø—Ä–æ—Å ‚Äî –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–ù–∞–∂–∞—Ç–∏–µ X –¥–æ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª X, –Ω–µ –æ—Ç–≤–µ—Ç–∏–≤ –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–π—Ç–∏ –±–µ–∑ submit –∏ –±–µ–∑ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–í—ã—Ö–æ–¥ —á–µ—Ä–µ–∑ –∂–µ—Å—Ç ¬´–Ω–∞–∑–∞–¥¬ª (swipe back / hardware back):** –¢—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –∫–∞–∫ –Ω–∞–∂–∞—Ç–∏–µ X ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ù–µ –¥–æ–ø—É—Å–∫–∞—Ç—å —Ç–∏—Ö–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
- **–ë–æ–ª—å—à–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (100+ –≤–æ–ø—Ä–æ—Å–æ–≤):** –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é (v2, –Ω–µ –¥–ª—è MVP)

### i18n –∫–ª—é—á–∏
```json
{
  "game.exitConfirmTitle": "–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É?",
  "game.exitConfirmMessage": "–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ {{answered}} –∏–∑ {{total}} –≤–æ–ø—Ä–æ—Å–æ–≤. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.",
  "game.continue": "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
  "game.finish": "–ó–∞–≤–µ—Ä—à–∏—Ç—å",
  "game.progressLabel": "{{current}} / {{total}}"
}
```

---

## FR-226: –°—á—ë—Ç—á–∏–∫ —Ñ–∞–∫—Ç–æ–≤ ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å —ç–∫—Ä–∞–Ω–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** UI-–∏–∑–º–µ–Ω–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–∫—Ç–∞ –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **–Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π, –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞**, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–µ—Å—Å –±—ã–ª –∑–∞–º–µ—Ç–Ω–µ–µ –∏ –Ω–µ —Ç–µ—Ä—è–ª—Å—è —Å—Ä–µ–¥–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–µ–π—á–∞—Å —Å—á—ë—Ç—á–∏–∫ ¬´3 / 10¬ª —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω **–≤–Ω—É—Ç—Ä–∏** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `SwipeCard` ‚Äî –≤ `cardContent`, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∞–∫—Ü–µ–Ω—Ç–Ω–æ–π –ø–æ–ª–æ—Å–∫–∏ –∏ –ø–µ—Ä–µ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–º –±–µ–π–¥–∂–µ–º:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ  ‚Üê –∞–∫—Ü–µ–Ω—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ (3px)
‚îÇ          3 / 10                  ‚îÇ  ‚Üê —Å—á—ë—Ç—á–∏–∫ –í–ù–£–¢–†–ò –∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ        [ –ù–∞—É–∫–∞ ]                 ‚îÇ  ‚Üê –∫–∞—Ç–µ–≥–æ—Ä–∏—è-–±–µ–π–¥–∂
‚îÇ                                  ‚îÇ
‚îÇ  ¬´–°–æ–ª–Ω—Ü–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–æ–∫—Ä—É–≥ –ó–µ–º–ª–∏¬ª ‚îÇ
‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–§–∞–π–ª:** `mobile/src/features/game/components/SwipeCard.tsx`, —Å—Ç—Ä–æ–∫–∏ 232-235:
```tsx
<View style={styles.cardContent}>
  <Text style={[styles.counter, { color: colors.textTertiary }]}>
    {cardIndex + 1} / {totalCards}
  </Text>
```

### –¢—Ä–µ–±—É–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–°—á—ë—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π**, –≤ –∑–æ–Ω–µ –º–µ–∂–¥—É GameHeader (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä/—Å—Ç—Ä–∏–∫) –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ —Å–≤–∞–π–ø–∞:

```
[‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä ‚ïê‚ïê‚ïê]     ‚Üê GameHeader
            3 / 27                      ‚Üê —Å—á—ë—Ç—á–∏–∫ –ó–î–ï–°–¨ (–Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è)
  ‚Üê –§–ï–ô–ö    —Å–≤–∞–π–ø–∞–π    –§–ê–ö–¢ ‚Üí         ‚Üê –ø–æ–¥—Å–∫–∞–∑–∫–∏

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ
‚îÇ        [ –ù–∞—É–∫–∞ ]                 ‚îÇ   ‚Üê –∫–∞—Ç–µ–≥–æ—Ä–∏—è-–±–µ–π–¥–∂ (–æ—Å—Ç–∞—ë—Ç—Å—è)
‚îÇ                                  ‚îÇ
‚îÇ  ¬´–°–æ–ª–Ω—Ü–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–æ–∫—Ä—É–≥ –ó–µ–º–ª–∏¬ª ‚îÇ
‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –£–¥–∞–ª–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –∏–∑ SwipeCard

**–§–∞–π–ª:** `mobile/src/features/game/components/SwipeCard.tsx`

–£–±—Ä–∞—Ç—å –∏–∑ `cardContent`:
```diff
  <View style={styles.cardContent}>
-   <Text style={[styles.counter, { color: colors.textTertiary }]}>
-     {cardIndex + 1} / {totalCards}
-   </Text>
    <View style={[styles.categoryBadge, ...]}>
```

–¢–∞–∫–∂–µ —É–±—Ä–∞—Ç—å —Å—á—ë—Ç—á–∏–∫ –∏–∑ stack preview card (—Å–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ —Å—Ç–µ–∫–µ, —Å—Ç—Ä–æ–∫–∏ 169-171).

#### 2. –î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –Ω–∞ —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã

**–§–∞–π–ª:** `mobile/app/game/card.tsx`

–î–æ–±–∞–≤–∏—Ç—å –º–µ–∂–¥—É `GameHeader` –∏ swipe hints:

```tsx
<View style={[styles.padded, { paddingTop: insets.top }]}>
  <GameHeader progress={progress} streak={liveStreak} />
</View>

{/* NEW: –°—á—ë—Ç—á–∏–∫ –Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π */}
<Text style={[styles.counterAbove, { color: colors.textSecondary }]}>
  {currentIndex + 1} / {totalCards}
</Text>

{/* Swipe hints */}
<View style={styles.swipeHints}>
```

#### 3. –°—Ç–∏–ª–∏

```typescript
counterAbove: {
  fontSize: 15,
  fontFamily: fontFamily.semiBold,
  textAlign: 'center',
  marginTop: 8,
  marginBottom: 4,
  letterSpacing: 0.5,
},
```

- –®—Ä–∏—Ñ—Ç –∫—Ä—É–ø–Ω–µ–µ, —á–µ–º –±—ã–ª –≤ –∫–∞—Ä—Ç–æ—á–∫–µ (15 –≤–º–µ—Å—Ç–æ 12)
- `fontFamily.semiBold` –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –¶–≤–µ—Ç `textSecondary` (—á—É—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–µ–µ, —á–µ–º –ø—Ä–µ–∂–Ω–∏–π `textTertiary`)

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `mobile/src/features/game/components/SwipeCard.tsx` | –£–¥–∞–ª–∏—Ç—å `counter` –∏–∑ cardContent (—Å—Ç—Ä–æ–∫–∏ 233-235) –∏ –∏–∑ stack card (—Å—Ç—Ä–æ–∫–∏ 169-171) |
| `mobile/app/game/card.tsx` | –î–æ–±–∞–≤–∏—Ç—å `<Text>` —Å–æ —Å—á—ë—Ç—á–∏–∫–æ–º –º–µ–∂–¥—É GameHeader –∏ swipeHints |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –°—á—ë—Ç—á–∏–∫ ¬´X / Y¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π**, –º–µ–∂–¥—É GameHeader –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ —Å–≤–∞–π–ø–∞
- AC-2: –°—á—ë—Ç—á–∏–∫ **–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∞–∫—Ç–∞
- AC-3: –°—á—ë—Ç—á–∏–∫ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ preview-–∫–∞—Ä—Ç–æ—á–∫–∞—Ö –≤ —Å—Ç–µ–∫–µ
- AC-4: –®—Ä–∏—Ñ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –∫—Ä—É–ø–Ω–µ–µ –∏ –∑–∞–º–µ—Ç–Ω–µ–µ, —á–µ–º –±—ã–ª (‚â• 15px)
- AC-5: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤: daily set, category, difficulty, collection, random

### –¢—Ä–µ–±—É–µ—Ç backend: –ù–µ—Ç

---

## FR-227: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî –±–µ–∑ —Å—Ç—Ä–∏–∫–∞ –∏ –æ—á–∫–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Must
**–†–µ–ª–∏–∑:** v1.2
**–¢–∏–ø:** Core-—É–ª—É—á—à–µ–Ω–∏–µ

### User Story
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≥–¥–µ —è —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–Ω–∏–º–∞—è, —á—Ç–æ —Å—Ç—Ä–∏–∫ –∏ –æ—á–∫–∏ –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è.

### –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏–ª **–≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã** –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å 100%, —Å–º. FR-220), –Ω–∞ —ç–∫—Ä–∞–Ω–µ –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –∫–Ω–æ–ø–∫–∏ ¬´–ò–≥—Ä–∞—Ç—å¬ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª**.

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                  ‚îÇ
‚îÇ    üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞            ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ    –í –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ —Å—Ç—Ä–∏–∫        ‚îÇ
‚îÇ    –∏ –æ—á–∫–∏ –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è.        ‚îÇ
‚îÇ    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –≤–ª–∏—è—é—Ç          ‚îÇ
‚îÇ    –Ω–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥.                 ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ    ‚òê –ü–æ–Ω—è—Ç–Ω–æ, –±–æ–ª—å—à–µ –Ω–µ          ‚îÇ
‚îÇ      –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å                  ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ       –ù–∞—á–∞—Ç—å –∏–≥—Ä—É        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

#### 1. –ö–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–§–∞–π–ª:** `mobile/app/category/[id].tsx`

–£—Å–ª–æ–≤–∏–µ –ø–æ—è–≤–ª–µ–Ω–∏—è: `category.isCompleted === true` (–≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Ä–µ—à–µ–Ω—ã, –∏–∑ FR-220).

```tsx
{category.isCompleted ? (
  <Button
    label={t('category.playAgain')}
    variant="outline"
    size="lg"
    iconLeft={<Feather name="refresh-cw" size={18} />}
    onPress={handlePlayAgain}
  />
) : (
  <Button
    label={t('common.play')}
    variant="primary"
    size="lg"
    onPress={handleStart}
  />
)}
```

#### 2. –ú–æ–¥–∞–ª–∫–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ `handlePlayAgain`:

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥ `replayWarningDismissed` (–∏–∑ AsyncStorage/MMKV).
- –ï—Å–ª–∏ `false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É.
- –ï—Å–ª–∏ `true` ‚Äî —Å—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∏–≥—Ä—É.

**–ú–æ–¥–∞–ª–∫–∞:**
```tsx
<Modal visible={showReplayWarning} transparent animationType="fade">
  <View style={styles.modalOverlay}>
    <View style={styles.modalContent}>
      <Text style={styles.modalIcon}>üîÑ</Text>
      <Text style={styles.modalTitle}>{t('category.replayTitle')}</Text>
      <Text style={styles.modalDesc}>{t('category.replayDesc')}</Text>

      <Pressable
        onPress={() => setDontShowAgain(!dontShowAgain)}
        style={styles.checkboxRow}
      >
        <View style={[styles.checkbox, dontShowAgain && styles.checkboxChecked]}>
          {dontShowAgain && <Feather name="check" size={12} color="#FFF" />}
        </View>
        <Text style={styles.checkboxLabel}>
          {t('category.replayDontShowAgain')}
        </Text>
      </Pressable>

      <Button
        label={t('category.replayStart')}
        variant="primary"
        size="lg"
        onPress={handleConfirmReplay}
      />
    </View>
  </View>
</Modal>
```

**–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–ù–∞—á–∞—Ç—å –∏–≥—Ä—É¬ª:**
```typescript
const handleConfirmReplay = async () => {
  if (dontShowAgain) {
    await storage.set('replayWarningDismissed', true);
  }
  setShowReplayWarning(false);
  startReplaySession();
};
```

#### 3. –§–ª–∞–≥ ¬´–ë–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å¬ª

**–•—Ä–∞–Ω–µ–Ω–∏–µ:** `useSettingsStore` (Zustand —Å persist) –∏–ª–∏ AsyncStorage/MMKV.

```typescript
// –í useSettingsStore:
replayWarningDismissed: boolean;  // default: false
setReplayWarningDismissed: (value: boolean) => void;
```

–ì–∞–ª–æ—á–∫–∞ ¬´–ü–æ–Ω—è—Ç–Ω–æ, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å¬ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç—Ç–æ—Ç —Ñ–ª–∞–≥. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –Ω–∞–∂–∞—Ç–∏–∏ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª –º–æ–¥–∞–ª–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äî –∏–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É.

#### 4. –ó–∞–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Å–µ—Å—Å–∏–∏ ‚Äî –±–µ–∑ —Å—Ç—Ä–∏–∫–∞ –∏ –æ—á–∫–æ–≤

**–ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–µ—Å—Å–∏–∏:**

```typescript
// –í collectionsApi.start():
const session = await collectionsApi.start({
  type: 'category',
  categoryId: id,
  replay: true,  // –ù–û–í–´–ô —Ñ–ª–∞–≥ ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞
});
```

**Backend:** –ö–æ–≥–¥–∞ `replay: true`:

**–§–∞–π–ª:** `server/src/modules/collections/collections.service.ts`

1. **–í—ã–±–æ—Ä–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤:** –í–µ—Ä–Ω—É—Ç—å –í–°–ï –≤–æ–ø—Ä–æ—Å—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤—Å—ë –ø—Ä–æ—à—ë–ª).
2. **–ü–µ—Ä–µ–º–µ—à–∞—Ç—å** —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º (Fisher-Yates).
3. **–ü–æ–º–µ—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é –∫–∞–∫ replay:**
   ```typescript
   this.sessions.set(sessionId, {
     ...sessionData,
     isReplay: true,  // –ù–û–í–û–ï –ø–æ–ª–µ
   });
   ```

**–ü—Ä–∏ submit replay-—Å–µ—Å—Å–∏–∏:**

```typescript
async submit(userId, sessionId, dto) {
  const session = this.sessions.get(sessionId);

  if (session.isReplay) {
    // 1. –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ UserQuestionHistory (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å)
    // 2. –ù–ï –æ–±–Ω–æ–≤–ª—è—Ç—å currentAnswerStreak / bestAnswerStreak
    // 3. –ù–ï –æ–±–Ω–æ–≤–ª—è—Ç—å score –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // 4. –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å LeaderboardEntry
    // 5. –ù–ï –æ–±–Ω–æ–≤–ª—è—Ç—å UserCollectionProgress

    // –¢–æ–ª—å–∫–æ –≤–µ—Ä–Ω—É—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
    const correctAnswers = dto.results.filter(r => r.result === 'correct').length;
    const totalTimeSeconds = dto.results.reduce((s, r) => s + r.timeSpentSeconds, 0);

    this.sessions.delete(sessionId);

    return {
      correctAnswers,
      totalQuestions: dto.results.length,
      totalTimeSeconds,
      score: 0,          // –æ—á–∫–∏ –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
      streak: 0,         // —Å—Ç—Ä–∏–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
      bestStreak: 0,
      isReplay: true,     // —Ñ–ª–∞–≥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
    };
  }

  // ... –æ–±—ã—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è non-replay —Å–µ—Å—Å–∏–π
}
```

#### 5. –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Äî –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä—ã

**–§–∞–π–ª:** `mobile/app/modal/results.tsx`

–ï—Å–ª–∏ `submissionResult.isReplay === true` (–∏–ª–∏ `score === 0` + `isReplay`):
- –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä/—Ç–µ–∫—Å—Ç: ¬´–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ ‚Äî –æ—á–∫–∏ –∏ —Å—Ç—Ä–∏–∫ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã¬ª
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç—Ä–∏–∫-–±–µ–π–¥–∂ –∏ —Å–∫–æ—Ä
- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ: `correctAnswers / totalQuestions`

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                  ‚îÇ
‚îÇ      üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞          ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ         8 / 12                   ‚îÇ
‚îÇ    –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤            ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ   –û—á–∫–∏ –∏ —Å—Ç—Ä–∏–∫ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ     [–ù–∞ –≥–ª–∞–≤–Ω—É—é]                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `mobile/app/category/[id].tsx` | –ö–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª, –º–æ–¥–∞–ª–∫–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º |
| `mobile/src/stores/useSettingsStore.ts` | –ù–æ–≤–æ–µ –ø–æ–ª–µ `replayWarningDismissed` |
| `mobile/src/features/collections/api/collectionsApi.ts` | –ü–∞—Ä–∞–º–µ—Ç—Ä `replay: true` |
| `server/src/modules/collections/collections.service.ts` | –û–±—Ä–∞–±–æ—Ç–∫–∞ `replay` –≤ start –∏ submit |
| `server/src/modules/collections/dto/start-session.dto.ts` | –ù–æ–≤–æ–µ –ø–æ–ª–µ `replay?: boolean` |
| `mobile/app/modal/results.tsx` | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ replay-—Å–µ—Å—Å–∏–∏ |
| `mobile/src/i18n/locales/en.json`, `ru.json` | –ù–æ–≤—ã–µ –∫–ª—é—á–∏ |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- AC-1: –ö–æ–≥–¥–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–µ—à–µ–Ω—ã, –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª
- AC-2: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–∞–∂–∞—Ç–∏–∏ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ —Å—Ç—Ä–∏–∫–µ –∏ –æ—á–∫–∞—Ö
- AC-3: –í –º–æ–¥–∞–ª–∫–µ –µ—Å—Ç—å —á–µ–∫–±–æ–∫—Å ¬´–ü–æ–Ω—è—Ç–Ω–æ, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å¬ª
- AC-4: –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω, –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –Ω–∞–∂–∞—Ç–∏—è—Ö –º–æ–¥–∞–ª–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- AC-5: –í –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ **–Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è** –æ—á–∫–∏ (score)
- AC-6: –í –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ **–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è** —Å—Ç—Ä–∏–∫ (–Ω–∏ answer streak, –Ω–∏ day streak)
- AC-7: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä—ã **–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è** –≤ UserQuestionHistory
- AC-8: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä—ã **–Ω–µ –≤–ª–∏—è—é—Ç** –Ω–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥
- AC-9: –≠–∫—Ä–∞–Ω –∏—Ç–æ–≥–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞¬ª
- AC-10: –í –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ –¥–æ—Å—Ç—É–ø–Ω—ã –í–°–ï –≤–æ–ø—Ä–æ—Å—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- FR-220 (–ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `isCompleted`)
- FR-225 (–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∏–≥—Ä–∞ ‚Äî –±–∞–∑–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞)

### –¢—Ä–µ–±—É–µ—Ç backend: –î–∞

### i18n –∫–ª—é—á–∏
```json
{
  "category.playAgain": "–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑",
  "category.replayTitle": "–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞",
  "category.replayDesc": "–í –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–≥—Ä–µ —Å—Ç—Ä–∏–∫ –∏ –æ—á–∫–∏ –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥.",
  "category.replayDontShowAgain": "–ü–æ–Ω—è—Ç–Ω–æ, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å",
  "category.replayStart": "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É",
  "results.replayBanner": "–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ ‚Äî –æ—á–∫–∏ –∏ —Å—Ç—Ä–∏–∫ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã"
}
```

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
FR-222 (heatmap –º–µ—Å—è—Ü—ã)         ‚îÄ‚îÄ‚îÄ —Ç–æ–ª—å–∫–æ mobile, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
FR-226 (—Å—á—ë—Ç—á–∏–∫ –Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π)  ‚îÄ‚îÄ‚îÄ —Ç–æ–ª—å–∫–æ mobile, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
FR-223 (streak –ª–∏–¥–µ—Ä–±–æ—Ä–¥)       ‚îÄ‚îÄ‚îÄ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î + backend + mobile
FR-224 (–ø–æ–∑–∏—Ü–∏—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ)   ‚îÄ‚îÄ‚îÄ backend + mobile, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç FR-223
FR-221 (—Å–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã)        ‚îÄ‚îÄ‚îÄ backend + mobile
FR-225 (–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è)  ‚îÄ‚îÄ‚îÄ backend + mobile (game card + results)
FR-227 (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –±–µ–∑ –æ—á–∫–æ–≤)    ‚îÄ‚îÄ‚îÄ backend + mobile, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç FR-220 + FR-225
FR-220 (–ø—Ä–æ–≥—Ä–µ—Å—Å)               ‚îÄ‚îÄ‚îÄ backend (feed + reset) + mobile (–≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
```

**–ü–µ—Ä–≤–∞—è –æ—á–µ—Ä–µ–¥—å (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ):**
- FR-222 (heatmap ‚Äî —Ç–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç, –±—ã—Å—Ç—Ä–æ)
- FR-226 (—Å—á—ë—Ç—á–∏–∫ –Ω–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π ‚Äî —Ç–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç, –±—ã—Å—Ç—Ä–æ)
- FR-223 (streak ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è + backend + —Ñ—Ä–æ–Ω—Ç)

**–í—Ç–æ—Ä–∞—è –æ—á–µ—Ä–µ–¥—å (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ):**
- FR-224 (–ø–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ ‚Äî backend + —Ñ—Ä–æ–Ω—Ç, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç FR-223)
- FR-221 (—Å–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã ‚Äî –Ω–æ–≤—ã–π —Ç–∏–ø —Å–µ—Å—Å–∏–∏ + –∫–Ω–æ–ø–∫–∞)
- FR-225 (–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî backend: —É–±—Ä–∞—Ç—å –ª–∏–º–∏—Ç; mobile: –∫–Ω–æ–ø–∫–∞ X + –º–æ–¥–∞–ª–∫–∞ + partial submit)

**–¢—Ä–µ—Ç—å—è –æ—á–µ—Ä–µ–¥—å:**
- FR-220 (–ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç feed + –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ + reset; —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç FR-225)

**–ß–µ—Ç–≤—ë—Ä—Ç–∞—è –æ—á–µ—Ä–µ–¥—å:**
- FR-227 (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ –±–µ–∑ –æ—á–∫–æ–≤ ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç FR-220 isCompleted + FR-225 –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞)

---

## –†–µ–∑—é–º–µ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞

| –≠–∫—Ä–∞–Ω | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|-------|-----------|
| Home Screen ‚Äî Category Cards | –î–æ–±–∞–≤–∏—Ç—å ¬´X / Y¬ª –ø—Ä–æ–≥—Ä–µ—Å—Å, –≥–∞–ª–æ—á–∫—É ‚úÖ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ |
| Home Screen ‚Äî Difficulty Cards | –î–æ–±–∞–≤–∏—Ç—å ¬´X / Y¬ª –ø—Ä–æ–≥—Ä–µ—Å—Å, –≥–∞–ª–æ—á–∫—É ‚úÖ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ |
| Home Screen ‚Äî Collection Cards | –î–æ–±–∞–≤–∏—Ç—å ¬´X / Y¬ª –ø—Ä–æ–≥—Ä–µ—Å—Å, –≥–∞–ª–æ—á–∫—É ‚úÖ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ |
| Home Screen ‚Äî –Ω–æ–≤–∞—è —Å–µ–∫—Ü–∏—è | –ö–Ω–æ–ø–∫–∞ ¬´üé≤ –°–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª –º–µ–∂–¥—É Daily Set –∏ Categories |
| Category Detail Screen | –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, ¬´–í—Å–µ —Ä–µ—à–µ–Ω—ã¬ª + ¬´–°—ã–≥—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ¬ª |
| Game Card Screen (collection mode) | –ö–Ω–æ–ø–∫–∞ X, –ø—Ä–æ–≥—Ä–µ—Å—Å ¬´X / Y¬ª, –º–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞ |
| Results Screen | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (N / M –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö) |
| Profile ‚Äî HeatmapCalendar | –ú–µ—Å—è—Ü—ã —á—ë—Ç–∫–æ –Ω–∞–¥ –ø–ª–∏—Ç–∫–∞–º–∏, —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç |
| Leaderboard ‚Äî streak mode | –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å ¬´–ª—É—á—à–∞—è —Å–µ—Ä–∏—è¬ª –∏ ¬´—Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è¬ª –≤–º–µ—Å—Ç–æ –¥–Ω–µ–≤–Ω–æ–≥–æ —Å—Ç—Ä–∏–∫–∞ |
| Leaderboard ‚Äî –≤—Å–µ —Ä–µ–∂–∏–º—ã | –ë–ª–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º (¬±1), –µ—Å–ª–∏ –Ω–µ –≤ —Ç–æ–ø-5 |
| Game Card Screen ‚Äî –≤—Å–µ —Ä–µ–∂–∏–º—ã | –°—á—ë—Ç—á–∏–∫ ¬´X / Y¬ª –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞–≤–µ—Ä—Ö —ç–∫—Ä–∞–Ω–∞ (–º–µ–∂–¥—É header –∏ hints) |
| Category Detail Screen (completed) | –ö–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª + –º–æ–¥–∞–ª–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Å—Ç—Ä–∏–∫–µ/–æ—á–∫–∞—Ö |
| Results Screen (replay) | –ë–∞–Ω–Ω–µ—Ä ¬´–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞ ‚Äî –æ—á–∫–∏ –∏ —Å—Ç—Ä–∏–∫ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã¬ª |

## –†–µ–∑—é–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:
1. **FR-220**: –†–∞—Å—à–∏—Ä–∏—Ç—å `GET /api/v1/home/feed` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `totalCount`, `answeredCount`, `isCompleted` –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –ø–æ–¥–±–æ—Ä–æ–∫. –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/v1/collections/reset-progress`. –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É `startSession()` ‚Äî –ø–æ–ª–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ anti-repeat —Ç–∞–π–º–µ—Ä—É).
2. **FR-221**: –í `CollectionsService.startSession()` –¥–æ–±–∞–≤–∏—Ç—å `type: 'random'` —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º: –Ω–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚â•3 –¥–Ω–µ–π + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚â•14 –¥–Ω–µ–π.
3. **FR-223**: –ú–∏–≥—Ä–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏—Ç—å `currentAnswerStreak`, `bestAnswerStreak` –≤ `User`. –û–±–Ω–æ–≤–∏—Ç—å `submitResults()` ‚Äî —Å—á–∏—Ç–∞—Ç—å —Å–µ—Ä–∏—é. –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å `getStreakLeaderboard()` –Ω–∞ –Ω–æ–≤—ã–µ –ø–æ–ª—è.
4. **FR-224**: –†–∞—Å—à–∏—Ä–∏—Ç—å `LeaderboardResponse` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `userContext` (above/current/below). –í—ã—á–∏—Å–ª—è—Ç—å –¥–ª—è –ø–æ–∑–∏—Ü–∏–π > 5.
5. **FR-225**: –í `startSession()` –µ—Å–ª–∏ count –Ω–µ —É–∫–∞–∑–∞–Ω –¥–ª—è category ‚Äî –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –í `submit()` ‚Äî `totalQuestions = dto.results.length`, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ submit.
6. **FR-227**: –í `startSession()` –æ–±—Ä–∞–±–æ—Ç–∫–∞ `replay: true` ‚Äî –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∏—Å—Ç–æ—Ä–∏—é. –í `submit()` replay-—Å–µ—Å—Å–∏–∏ ‚Äî –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∏–∫/–æ—á–∫–∏/–ª–∏–¥–µ—Ä–±–æ—Ä–¥.

### Mobile-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:
1. **FR-220**: –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π/—Å–ª–æ–∂–Ω–æ—Å—Ç–∏/–ø–æ–¥–±–æ—Ä–æ–∫ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å. –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä + ¬´–ó–∞–Ω–æ–≤–æ¬ª. –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã `CategoryWithCount` ‚Üí `CategoryWithProgress`.
2. **FR-221**: –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ Home Screen. –û–±—Ä–∞–±–æ—Ç–∫–∞ `type: 'random'` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏.
3. **FR-222**: –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å `HeatmapCalendar` ‚Äî –º–µ—Å—è—Ü—ã –Ω–∞–¥ –ø–ª–∏—Ç–∫–∞–º–∏, —É–≤–µ–ª–∏—á–∏—Ç—å —à—Ä–∏—Ñ—Ç.
4. **FR-223**: –û–±–Ω–æ–≤–∏—Ç—å `LeaderboardEntry` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å `bestAnswerStreak` / `currentAnswerStreak`.
5. **FR-224**: –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –±–ª–æ–∫ `userContext` –ø–æ–¥ —Ç–æ–ø-—Å–ø–∏—Å–∫–æ–º –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å + above/current/below).
6. **FR-225**: –£–±—Ä–∞—Ç—å `count: 10` –≤ category/[id].tsx. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É X –Ω–∞ game/card.tsx. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥–∞–ª–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è + `submitPartialResults()`. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å results.tsx –¥–ª—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
7. **FR-226**: –í SwipeCard.tsx —É–¥–∞–ª–∏—Ç—å counter –∏–∑ cardContent –∏ stack preview. –í card.tsx –¥–æ–±–∞–≤–∏—Ç—å `<Text>` —Å—á—ë—Ç—á–∏–∫ –º–µ–∂–¥—É GameHeader –∏ swipeHints.
8. **FR-227**: –í category/[id].tsx ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑¬ª + –º–æ–¥–∞–ª–∫–∞ + —á–µ–∫–±–æ–∫—Å ¬´–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å¬ª. –í useSettingsStore ‚Äî `replayWarningDismissed`. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `replay: true` –≤ API. –í results.tsx ‚Äî –±–∞–Ω–Ω–µ—Ä ¬´–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–≥—Ä–∞¬ª.
